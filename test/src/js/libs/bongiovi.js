!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.bongiovi=t()}}(function(){var t;return function n(t,r,e){function i(u,o){if(!r[u]){if(!t[u]){var s="function"==typeof require&&require;if(!o&&s)return s(u,!0);if(a)return a(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[u]={exports:{}};t[u][0].call(f.exports,function(n){var r=t[u][1][n];return i(r?r:n)},f,f.exports,n,t,r,e)}return r[u].exports}for(var a="function"==typeof require&&require,u=0;u<e.length;u++)i(e[u]);return i}({1:[function(t,n){"use strict";function r(){}var e=t("./libs/GLTools"),i=new r;i.GL=e,i.GLTools=e,i.glm=t("gl-matrix"),n.exports=i},{"./libs/GLTools":3,"gl-matrix":2}],2:[function(n,r,e){!function(n){"use strict";var r={};"undefined"==typeof e?"function"==typeof t&&"object"==typeof t.amd&&t.amd?(r.exports={},t(function(){return r.exports})):r.exports="undefined"!=typeof window?window:n:r.exports=e,function(t){if(!n)var n=1e-6;if(!r)var r="undefined"!=typeof Float32Array?Float32Array:Array;if(!e)var e=Math.random;var i={};i.setMatrixArrayType=function(t){r=t},"undefined"!=typeof t&&(t.glMatrix=i);var a=Math.PI/180;i.toRadian=function(t){return t*a};var u={};u.create=function(){var t=new r(2);return t[0]=0,t[1]=0,t},u.clone=function(t){var n=new r(2);return n[0]=t[0],n[1]=t[1],n},u.fromValues=function(t,n){var e=new r(2);return e[0]=t,e[1]=n,e},u.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},u.set=function(t,n,r){return t[0]=n,t[1]=r,t},u.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t},u.subtract=function(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t},u.sub=u.subtract,u.multiply=function(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t},u.mul=u.multiply,u.divide=function(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t},u.div=u.divide,u.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t},u.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t},u.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t},u.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t},u.distance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1];return Math.sqrt(r*r+e*e)},u.dist=u.distance,u.squaredDistance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1];return r*r+e*e},u.sqrDist=u.squaredDistance,u.length=function(t){var n=t[0],r=t[1];return Math.sqrt(n*n+r*r)},u.len=u.length,u.squaredLength=function(t){var n=t[0],r=t[1];return n*n+r*r},u.sqrLen=u.squaredLength,u.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},u.normalize=function(t,n){var r=n[0],e=n[1],i=r*r+e*e;return i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i),t},u.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},u.cross=function(t,n,r){var e=n[0]*r[1]-n[1]*r[0];return t[0]=t[1]=0,t[2]=e,t},u.lerp=function(t,n,r,e){var i=n[0],a=n[1];return t[0]=i+e*(r[0]-i),t[1]=a+e*(r[1]-a),t},u.random=function(t,n){n=n||1;var r=2*e()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t},u.transformMat2=function(t,n,r){var e=n[0],i=n[1];return t[0]=r[0]*e+r[2]*i,t[1]=r[1]*e+r[3]*i,t},u.transformMat2d=function(t,n,r){var e=n[0],i=n[1];return t[0]=r[0]*e+r[2]*i+r[4],t[1]=r[1]*e+r[3]*i+r[5],t},u.transformMat3=function(t,n,r){var e=n[0],i=n[1];return t[0]=r[0]*e+r[3]*i+r[6],t[1]=r[1]*e+r[4]*i+r[7],t},u.transformMat4=function(t,n,r){var e=n[0],i=n[1];return t[0]=r[0]*e+r[4]*i+r[12],t[1]=r[1]*e+r[5]*i+r[13],t},u.forEach=function(){var t=u.create();return function(n,r,e,i,a,u){var o,s;for(r||(r=2),e||(e=0),s=i?Math.min(i*r+e,n.length):n.length,o=e;s>o;o+=r)t[0]=n[o],t[1]=n[o+1],a(t,t,u),n[o]=t[0],n[o+1]=t[1];return n}}(),u.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=u);var o={};o.create=function(){var t=new r(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var n=new r(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},o.fromValues=function(t,n,e){var i=new r(3);return i[0]=t,i[1]=n,i[2]=e,i},o.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},o.set=function(t,n,r,e){return t[0]=n,t[1]=r,t[2]=e,t},o.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t},o.subtract=function(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t},o.sub=o.subtract,o.multiply=function(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t},o.mul=o.multiply,o.divide=function(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t},o.div=o.divide,o.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t},o.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t},o.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t},o.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t},o.distance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2];return Math.sqrt(r*r+e*e+i*i)},o.dist=o.distance,o.squaredDistance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2];return r*r+e*e+i*i},o.sqrDist=o.squaredDistance,o.length=function(t){var n=t[0],r=t[1],e=t[2];return Math.sqrt(n*n+r*r+e*e)},o.len=o.length,o.squaredLength=function(t){var n=t[0],r=t[1],e=t[2];return n*n+r*r+e*e},o.sqrLen=o.squaredLength,o.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},o.normalize=function(t,n){var r=n[0],e=n[1],i=n[2],a=r*r+e*e+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a),t},o.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},o.cross=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=r[0],o=r[1],s=r[2];return t[0]=i*s-a*o,t[1]=a*u-e*s,t[2]=e*o-i*u,t},o.lerp=function(t,n,r,e){var i=n[0],a=n[1],u=n[2];return t[0]=i+e*(r[0]-i),t[1]=a+e*(r[1]-a),t[2]=u+e*(r[2]-u),t},o.random=function(t,n){n=n||1;var r=2*e()*Math.PI,i=2*e()-1,a=Math.sqrt(1-i*i)*n;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=i*n,t},o.transformMat4=function(t,n,r){var e=n[0],i=n[1],a=n[2];return t[0]=r[0]*e+r[4]*i+r[8]*a+r[12],t[1]=r[1]*e+r[5]*i+r[9]*a+r[13],t[2]=r[2]*e+r[6]*i+r[10]*a+r[14],t},o.transformMat3=function(t,n,r){var e=n[0],i=n[1],a=n[2];return t[0]=e*r[0]+i*r[3]+a*r[6],t[1]=e*r[1]+i*r[4]+a*r[7],t[2]=e*r[2]+i*r[5]+a*r[8],t},o.transformQuat=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=r[0],o=r[1],s=r[2],c=r[3],f=c*e+o*a-s*i,h=c*i+s*e-u*a,l=c*a+u*i-o*e,v=-u*e-o*i-s*a;return t[0]=f*c+v*-u+h*-s-l*-o,t[1]=h*c+v*-o+l*-u-f*-s,t[2]=l*c+v*-s+f*-o-h*-u,t},o.rotateX=function(t,n,r,e){var i=[],a=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(e)-i[2]*Math.sin(e),a[2]=i[1]*Math.sin(e)+i[2]*Math.cos(e),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},o.rotateY=function(t,n,r,e){var i=[],a=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],a[0]=i[2]*Math.sin(e)+i[0]*Math.cos(e),a[1]=i[1],a[2]=i[2]*Math.cos(e)-i[0]*Math.sin(e),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},o.rotateZ=function(t,n,r,e){var i=[],a=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],a[0]=i[0]*Math.cos(e)-i[1]*Math.sin(e),a[1]=i[0]*Math.sin(e)+i[1]*Math.cos(e),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},o.forEach=function(){var t=o.create();return function(n,r,e,i,a,u){var o,s;for(r||(r=3),e||(e=0),s=i?Math.min(i*r+e,n.length):n.length,o=e;s>o;o+=r)t[0]=n[o],t[1]=n[o+1],t[2]=n[o+2],a(t,t,u),n[o]=t[0],n[o+1]=t[1],n[o+2]=t[2];return n}}(),o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=o);var s={};s.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},s.clone=function(t){var n=new r(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},s.fromValues=function(t,n,e,i){var a=new r(4);return a[0]=t,a[1]=n,a[2]=e,a[3]=i,a},s.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},s.set=function(t,n,r,e,i){return t[0]=n,t[1]=r,t[2]=e,t[3]=i,t},s.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},s.subtract=function(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t},s.sub=s.subtract,s.multiply=function(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t},s.mul=s.multiply,s.divide=function(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t},s.div=s.divide,s.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t},s.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t},s.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},s.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t},s.distance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2],a=n[3]-t[3];return Math.sqrt(r*r+e*e+i*i+a*a)},s.dist=s.distance,s.squaredDistance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2],a=n[3]-t[3];return r*r+e*e+i*i+a*a},s.sqrDist=s.squaredDistance,s.length=function(t){var n=t[0],r=t[1],e=t[2],i=t[3];return Math.sqrt(n*n+r*r+e*e+i*i)},s.len=s.length,s.squaredLength=function(t){var n=t[0],r=t[1],e=t[2],i=t[3];return n*n+r*r+e*e+i*i},s.sqrLen=s.squaredLength,s.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},s.normalize=function(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],u=r*r+e*e+i*i+a*a;return u>0&&(u=1/Math.sqrt(u),t[0]=n[0]*u,t[1]=n[1]*u,t[2]=n[2]*u,t[3]=n[3]*u),t},s.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},s.lerp=function(t,n,r,e){var i=n[0],a=n[1],u=n[2],o=n[3];return t[0]=i+e*(r[0]-i),t[1]=a+e*(r[1]-a),t[2]=u+e*(r[2]-u),t[3]=o+e*(r[3]-o),t},s.random=function(t,n){return n=n||1,t[0]=e(),t[1]=e(),t[2]=e(),t[3]=e(),s.normalize(t,t),s.scale(t,t,n),t},s.transformMat4=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3];return t[0]=r[0]*e+r[4]*i+r[8]*a+r[12]*u,t[1]=r[1]*e+r[5]*i+r[9]*a+r[13]*u,t[2]=r[2]*e+r[6]*i+r[10]*a+r[14]*u,t[3]=r[3]*e+r[7]*i+r[11]*a+r[15]*u,t},s.transformQuat=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=r[0],o=r[1],s=r[2],c=r[3],f=c*e+o*a-s*i,h=c*i+s*e-u*a,l=c*a+u*i-o*e,v=-u*e-o*i-s*a;return t[0]=f*c+v*-u+h*-s-l*-o,t[1]=h*c+v*-o+l*-u-f*-s,t[2]=l*c+v*-s+f*-o-h*-u,t},s.forEach=function(){var t=s.create();return function(n,r,e,i,a,u){var o,s;for(r||(r=4),e||(e=0),s=i?Math.min(i*r+e,n.length):n.length,o=e;s>o;o+=r)t[0]=n[o],t[1]=n[o+1],t[2]=n[o+2],t[3]=n[o+3],a(t,t,u),n[o]=t[0],n[o+1]=t[1],n[o+2]=t[2],n[o+3]=t[3];return n}}(),s.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=s);var c={};c.create=function(){var t=new r(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},c.clone=function(t){var n=new r(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},c.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},c.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},c.transpose=function(t,n){if(t===n){var r=n[1];t[1]=n[2],t[2]=r}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},c.invert=function(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],u=r*a-i*e;return u?(u=1/u,t[0]=a*u,t[1]=-e*u,t[2]=-i*u,t[3]=r*u,t):null},c.adjoint=function(t,n){var r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t},c.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},c.multiply=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=r[0],s=r[1],c=r[2],f=r[3];return t[0]=e*o+a*s,t[1]=i*o+u*s,t[2]=e*c+a*f,t[3]=i*c+u*f,t},c.mul=c.multiply,c.rotate=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=Math.sin(r),s=Math.cos(r);return t[0]=e*s+a*o,t[1]=i*s+u*o,t[2]=e*-o+a*s,t[3]=i*-o+u*s,t},c.scale=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=r[0],s=r[1];return t[0]=e*o,t[1]=i*o,t[2]=a*s,t[3]=u*s,t},c.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},c.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},c.LDU=function(t,n,r,e){return t[2]=e[2]/e[0],r[0]=e[0],r[1]=e[1],r[3]=e[3]-t[2]*r[1],[t,n,r]},"undefined"!=typeof t&&(t.mat2=c);var f={};f.create=function(){var t=new r(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},f.clone=function(t){var n=new r(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},f.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},f.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},f.invert=function(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],u=n[4],o=n[5],s=r*a-e*i;return s?(s=1/s,t[0]=a*s,t[1]=-e*s,t[2]=-i*s,t[3]=r*s,t[4]=(i*o-a*u)*s,t[5]=(e*u-r*o)*s,t):null},f.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},f.multiply=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=r[0],f=r[1],h=r[2],l=r[3],v=r[4],d=r[5];return t[0]=e*c+a*f,t[1]=i*c+u*f,t[2]=e*h+a*l,t[3]=i*h+u*l,t[4]=e*v+a*d+o,t[5]=i*v+u*d+s,t},f.mul=f.multiply,f.rotate=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=Math.sin(r),f=Math.cos(r);return t[0]=e*f+a*c,t[1]=i*f+u*c,t[2]=e*-c+a*f,t[3]=i*-c+u*f,t[4]=o,t[5]=s,t},f.scale=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=r[0],f=r[1];return t[0]=e*c,t[1]=i*c,t[2]=a*f,t[3]=u*f,t[4]=o,t[5]=s,t},f.translate=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=r[0],f=r[1];return t[0]=e,t[1]=i,t[2]=a,t[3]=u,t[4]=e*c+a*f+o,t[5]=i*c+u*f+s,t},f.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},f.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},"undefined"!=typeof t&&(t.mat2d=f);var h={};h.create=function(){var t=new r(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},h.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},h.clone=function(t){var n=new r(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},h.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},h.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},h.transpose=function(t,n){if(t===n){var r=n[1],e=n[2],i=n[5];t[1]=n[3],t[2]=n[6],t[3]=r,t[5]=n[7],t[6]=e,t[7]=i}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},h.invert=function(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],u=n[4],o=n[5],s=n[6],c=n[7],f=n[8],h=f*u-o*c,l=-f*a+o*s,v=c*a-u*s,d=r*h+e*l+i*v;return d?(d=1/d,t[0]=h*d,t[1]=(-f*e+i*c)*d,t[2]=(o*e-i*u)*d,t[3]=l*d,t[4]=(f*r-i*s)*d,t[5]=(-o*r+i*a)*d,t[6]=v*d,t[7]=(-c*r+e*s)*d,t[8]=(u*r-e*a)*d,t):null},h.adjoint=function(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],u=n[4],o=n[5],s=n[6],c=n[7],f=n[8];return t[0]=u*f-o*c,t[1]=i*c-e*f,t[2]=e*o-i*u,t[3]=o*s-a*f,t[4]=r*f-i*s,t[5]=i*a-r*o,t[6]=a*c-u*s,t[7]=e*s-r*c,t[8]=r*u-e*a,t},h.determinant=function(t){var n=t[0],r=t[1],e=t[2],i=t[3],a=t[4],u=t[5],o=t[6],s=t[7],c=t[8];return n*(c*a-u*s)+r*(-c*i+u*o)+e*(s*i-a*o)},h.multiply=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=r[0],v=r[1],d=r[2],m=r[3],M=r[4],p=r[5],g=r[6],w=r[7],x=r[8];return t[0]=l*e+v*u+d*c,t[1]=l*i+v*o+d*f,t[2]=l*a+v*s+d*h,t[3]=m*e+M*u+p*c,t[4]=m*i+M*o+p*f,t[5]=m*a+M*s+p*h,t[6]=g*e+w*u+x*c,t[7]=g*i+w*o+x*f,t[8]=g*a+w*s+x*h,t},h.mul=h.multiply,h.translate=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=r[0],v=r[1];return t[0]=e,t[1]=i,t[2]=a,t[3]=u,t[4]=o,t[5]=s,t[6]=l*e+v*u+c,t[7]=l*i+v*o+f,t[8]=l*a+v*s+h,t},h.rotate=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=Math.sin(r),v=Math.cos(r);return t[0]=v*e+l*u,t[1]=v*i+l*o,t[2]=v*a+l*s,t[3]=v*u-l*e,t[4]=v*o-l*i,t[5]=v*s-l*a,t[6]=c,t[7]=f,t[8]=h,t},h.scale=function(t,n,r){var e=r[0],i=r[1];return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=i*n[3],t[4]=i*n[4],t[5]=i*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},h.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},h.fromQuat=function(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],u=r+r,o=e+e,s=i+i,c=r*u,f=e*u,h=e*o,l=i*u,v=i*o,d=i*s,m=a*u,M=a*o,p=a*s;return t[0]=1-h-d,t[3]=f-p,t[6]=l+M,t[1]=f+p,t[4]=1-c-d,t[7]=v-m,t[2]=l-M,t[5]=v+m,t[8]=1-c-h,t},h.normalFromMat4=function(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],u=n[4],o=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],v=n[11],d=n[12],m=n[13],M=n[14],p=n[15],g=r*o-e*u,w=r*s-i*u,x=r*c-a*u,y=e*s-i*o,b=e*c-a*o,A=i*c-a*s,q=f*m-h*d,_=f*M-l*d,L=f*p-v*d,E=h*M-l*m,T=h*p-v*m,P=l*p-v*M,B=g*P-w*T+x*E+y*L-b*_+A*q;return B?(B=1/B,t[0]=(o*P-s*T+c*E)*B,t[1]=(s*L-u*P-c*_)*B,t[2]=(u*T-o*L+c*q)*B,t[3]=(i*T-e*P-a*E)*B,t[4]=(r*P-i*L+a*_)*B,t[5]=(e*L-r*T-a*q)*B,t[6]=(m*A-M*b+p*y)*B,t[7]=(M*x-d*A-p*w)*B,t[8]=(d*b-m*x+p*g)*B,t):null},h.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},"undefined"!=typeof t&&(t.mat3=h);var l={};l.create=function(){var t=new r(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.clone=function(t){var n=new r(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},l.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},l.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.transpose=function(t,n){if(t===n){var r=n[1],e=n[2],i=n[3],a=n[6],u=n[7],o=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=a,t[11]=n[14],t[12]=i,t[13]=u,t[14]=o}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},l.invert=function(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],u=n[4],o=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],v=n[11],d=n[12],m=n[13],M=n[14],p=n[15],g=r*o-e*u,w=r*s-i*u,x=r*c-a*u,y=e*s-i*o,b=e*c-a*o,A=i*c-a*s,q=f*m-h*d,_=f*M-l*d,L=f*p-v*d,E=h*M-l*m,T=h*p-v*m,P=l*p-v*M,B=g*P-w*T+x*E+y*L-b*_+A*q;return B?(B=1/B,t[0]=(o*P-s*T+c*E)*B,t[1]=(i*T-e*P-a*E)*B,t[2]=(m*A-M*b+p*y)*B,t[3]=(l*b-h*A-v*y)*B,t[4]=(s*L-u*P-c*_)*B,t[5]=(r*P-i*L+a*_)*B,t[6]=(M*x-d*A-p*w)*B,t[7]=(f*A-l*x+v*w)*B,t[8]=(u*T-o*L+c*q)*B,t[9]=(e*L-r*T-a*q)*B,t[10]=(d*b-m*x+p*g)*B,t[11]=(h*x-f*b-v*g)*B,t[12]=(o*_-u*E-s*q)*B,t[13]=(r*E-e*_+i*q)*B,t[14]=(m*w-d*y-M*g)*B,t[15]=(f*y-h*w+l*g)*B,t):null},l.adjoint=function(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],u=n[4],o=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],v=n[11],d=n[12],m=n[13],M=n[14],p=n[15];return t[0]=o*(l*p-v*M)-h*(s*p-c*M)+m*(s*v-c*l),t[1]=-(e*(l*p-v*M)-h*(i*p-a*M)+m*(i*v-a*l)),t[2]=e*(s*p-c*M)-o*(i*p-a*M)+m*(i*c-a*s),t[3]=-(e*(s*v-c*l)-o*(i*v-a*l)+h*(i*c-a*s)),t[4]=-(u*(l*p-v*M)-f*(s*p-c*M)+d*(s*v-c*l)),t[5]=r*(l*p-v*M)-f*(i*p-a*M)+d*(i*v-a*l),t[6]=-(r*(s*p-c*M)-u*(i*p-a*M)+d*(i*c-a*s)),t[7]=r*(s*v-c*l)-u*(i*v-a*l)+f*(i*c-a*s),t[8]=u*(h*p-v*m)-f*(o*p-c*m)+d*(o*v-c*h),t[9]=-(r*(h*p-v*m)-f*(e*p-a*m)+d*(e*v-a*h)),t[10]=r*(o*p-c*m)-u*(e*p-a*m)+d*(e*c-a*o),t[11]=-(r*(o*v-c*h)-u*(e*v-a*h)+f*(e*c-a*o)),t[12]=-(u*(h*M-l*m)-f*(o*M-s*m)+d*(o*l-s*h)),t[13]=r*(h*M-l*m)-f*(e*M-i*m)+d*(e*l-i*h),t[14]=-(r*(o*M-s*m)-u*(e*M-i*m)+d*(e*s-i*o)),t[15]=r*(o*l-s*h)-u*(e*l-i*h)+f*(e*s-i*o),t},l.determinant=function(t){var n=t[0],r=t[1],e=t[2],i=t[3],a=t[4],u=t[5],o=t[6],s=t[7],c=t[8],f=t[9],h=t[10],l=t[11],v=t[12],d=t[13],m=t[14],M=t[15],p=n*u-r*a,g=n*o-e*a,w=n*s-i*a,x=r*o-e*u,y=r*s-i*u,b=e*s-i*o,A=c*d-f*v,q=c*m-h*v,_=c*M-l*v,L=f*m-h*d,E=f*M-l*d,T=h*M-l*m;return p*T-g*E+w*L+x*_-y*q+b*A},l.multiply=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=n[9],v=n[10],d=n[11],m=n[12],M=n[13],p=n[14],g=n[15],w=r[0],x=r[1],y=r[2],b=r[3];return t[0]=w*e+x*o+y*h+b*m,t[1]=w*i+x*s+y*l+b*M,t[2]=w*a+x*c+y*v+b*p,t[3]=w*u+x*f+y*d+b*g,w=r[4],x=r[5],y=r[6],b=r[7],t[4]=w*e+x*o+y*h+b*m,t[5]=w*i+x*s+y*l+b*M,t[6]=w*a+x*c+y*v+b*p,t[7]=w*u+x*f+y*d+b*g,w=r[8],x=r[9],y=r[10],b=r[11],t[8]=w*e+x*o+y*h+b*m,t[9]=w*i+x*s+y*l+b*M,t[10]=w*a+x*c+y*v+b*p,t[11]=w*u+x*f+y*d+b*g,w=r[12],x=r[13],y=r[14],b=r[15],t[12]=w*e+x*o+y*h+b*m,t[13]=w*i+x*s+y*l+b*M,t[14]=w*a+x*c+y*v+b*p,t[15]=w*u+x*f+y*d+b*g,t},l.mul=l.multiply,l.translate=function(t,n,r){var e,i,a,u,o,s,c,f,h,l,v,d,m=r[0],M=r[1],p=r[2];return n===t?(t[12]=n[0]*m+n[4]*M+n[8]*p+n[12],t[13]=n[1]*m+n[5]*M+n[9]*p+n[13],t[14]=n[2]*m+n[6]*M+n[10]*p+n[14],t[15]=n[3]*m+n[7]*M+n[11]*p+n[15]):(e=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=n[9],v=n[10],d=n[11],t[0]=e,t[1]=i,t[2]=a,t[3]=u,t[4]=o,t[5]=s,t[6]=c,t[7]=f,t[8]=h,t[9]=l,t[10]=v,t[11]=d,t[12]=e*m+o*M+h*p+n[12],t[13]=i*m+s*M+l*p+n[13],t[14]=a*m+c*M+v*p+n[14],t[15]=u*m+f*M+d*p+n[15]),t},l.scale=function(t,n,r){var e=r[0],i=r[1],a=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=n[11]*a,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},l.rotate=function(t,r,e,i){var a,u,o,s,c,f,h,l,v,d,m,M,p,g,w,x,y,b,A,q,_,L,E,T,P=i[0],B=i[1],F=i[2],R=Math.sqrt(P*P+B*B+F*F);return Math.abs(R)<n?null:(R=1/R,P*=R,B*=R,F*=R,a=Math.sin(e),u=Math.cos(e),o=1-u,s=r[0],c=r[1],f=r[2],h=r[3],l=r[4],v=r[5],d=r[6],m=r[7],M=r[8],p=r[9],g=r[10],w=r[11],x=P*P*o+u,y=B*P*o+F*a,b=F*P*o-B*a,A=P*B*o-F*a,q=B*B*o+u,_=F*B*o+P*a,L=P*F*o+B*a,E=B*F*o-P*a,T=F*F*o+u,t[0]=s*x+l*y+M*b,t[1]=c*x+v*y+p*b,t[2]=f*x+d*y+g*b,t[3]=h*x+m*y+w*b,t[4]=s*A+l*q+M*_,t[5]=c*A+v*q+p*_,t[6]=f*A+d*q+g*_,t[7]=h*A+m*q+w*_,t[8]=s*L+l*E+M*T,t[9]=c*L+v*E+p*T,t[10]=f*L+d*E+g*T,t[11]=h*L+m*E+w*T,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},l.rotateX=function(t,n,r){var e=Math.sin(r),i=Math.cos(r),a=n[4],u=n[5],o=n[6],s=n[7],c=n[8],f=n[9],h=n[10],l=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=a*i+c*e,t[5]=u*i+f*e,t[6]=o*i+h*e,t[7]=s*i+l*e,t[8]=c*i-a*e,t[9]=f*i-u*e,t[10]=h*i-o*e,t[11]=l*i-s*e,t},l.rotateY=function(t,n,r){var e=Math.sin(r),i=Math.cos(r),a=n[0],u=n[1],o=n[2],s=n[3],c=n[8],f=n[9],h=n[10],l=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*i-c*e,t[1]=u*i-f*e,t[2]=o*i-h*e,t[3]=s*i-l*e,t[8]=a*e+c*i,t[9]=u*e+f*i,t[10]=o*e+h*i,t[11]=s*e+l*i,t},l.rotateZ=function(t,n,r){var e=Math.sin(r),i=Math.cos(r),a=n[0],u=n[1],o=n[2],s=n[3],c=n[4],f=n[5],h=n[6],l=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*i+c*e,t[1]=u*i+f*e,t[2]=o*i+h*e,t[3]=s*i+l*e,t[4]=c*i-a*e,t[5]=f*i-u*e,t[6]=h*i-o*e,t[7]=l*i-s*e,t},l.fromRotationTranslation=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=e+e,s=i+i,c=a+a,f=e*o,h=e*s,l=e*c,v=i*s,d=i*c,m=a*c,M=u*o,p=u*s,g=u*c;return t[0]=1-(v+m),t[1]=h+g,t[2]=l-p,t[3]=0,t[4]=h-g,t[5]=1-(f+m),t[6]=d+M,t[7]=0,t[8]=l+p,t[9]=d-M,t[10]=1-(f+v),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},l.fromQuat=function(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],u=r+r,o=e+e,s=i+i,c=r*u,f=e*u,h=e*o,l=i*u,v=i*o,d=i*s,m=a*u,M=a*o,p=a*s;return t[0]=1-h-d,t[1]=f+p,t[2]=l-M,t[3]=0,t[4]=f-p,t[5]=1-c-d,t[6]=v+m,t[7]=0,t[8]=l+M,t[9]=v-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.frustum=function(t,n,r,e,i,a,u){var o=1/(r-n),s=1/(i-e),c=1/(a-u);return t[0]=2*a*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(r+n)*o,t[9]=(i+e)*s,t[10]=(u+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*a*2*c,t[15]=0,t},l.perspective=function(t,n,r,e,i){var a=1/Math.tan(n/2),u=1/(e-i);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+e)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*e*u,t[15]=0,t},l.ortho=function(t,n,r,e,i,a,u){var o=1/(n-r),s=1/(e-i),c=1/(a-u);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+r)*o,t[13]=(i+e)*s,t[14]=(u+a)*c,t[15]=1,t},l.lookAt=function(t,r,e,i){var a,u,o,s,c,f,h,v,d,m,M=r[0],p=r[1],g=r[2],w=i[0],x=i[1],y=i[2],b=e[0],A=e[1],q=e[2];return Math.abs(M-b)<n&&Math.abs(p-A)<n&&Math.abs(g-q)<n?l.identity(t):(h=M-b,v=p-A,d=g-q,m=1/Math.sqrt(h*h+v*v+d*d),h*=m,v*=m,d*=m,a=x*d-y*v,u=y*h-w*d,o=w*v-x*h,m=Math.sqrt(a*a+u*u+o*o),m?(m=1/m,a*=m,u*=m,o*=m):(a=0,u=0,o=0),s=v*o-d*u,c=d*a-h*o,f=h*u-v*a,m=Math.sqrt(s*s+c*c+f*f),m?(m=1/m,s*=m,c*=m,f*=m):(s=0,c=0,f=0),t[0]=a,t[1]=s,t[2]=h,t[3]=0,t[4]=u,t[5]=c,t[6]=v,t[7]=0,t[8]=o,t[9]=f,t[10]=d,t[11]=0,t[12]=-(a*M+u*p+o*g),t[13]=-(s*M+c*p+f*g),t[14]=-(h*M+v*p+d*g),t[15]=1,t)},l.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},l.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof t&&(t.mat4=l);var v={};v.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},v.rotationTo=function(){var t=o.create(),n=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(e,i,a){var u=o.dot(i,a);return-.999999>u?(o.cross(t,n,i),o.length(t)<1e-6&&o.cross(t,r,i),o.normalize(t,t),v.setAxisAngle(e,t,Math.PI),e):u>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(o.cross(t,i,a),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+u,v.normalize(e,e))}}(),v.setAxes=function(){var t=h.create();return function(n,r,e,i){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],v.normalize(n,v.fromMat3(n,t))}}(),v.clone=s.clone,v.fromValues=s.fromValues,v.copy=s.copy,v.set=s.set,v.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},v.setAxisAngle=function(t,n,r){r=.5*r;var e=Math.sin(r);return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=Math.cos(r),t},v.add=s.add,v.multiply=function(t,n,r){var e=n[0],i=n[1],a=n[2],u=n[3],o=r[0],s=r[1],c=r[2],f=r[3];return t[0]=e*f+u*o+i*c-a*s,t[1]=i*f+u*s+a*o-e*c,t[2]=a*f+u*c+e*s-i*o,t[3]=u*f-e*o-i*s-a*c,t},v.mul=v.multiply,v.scale=s.scale,v.rotateX=function(t,n,r){r*=.5;var e=n[0],i=n[1],a=n[2],u=n[3],o=Math.sin(r),s=Math.cos(r);return t[0]=e*s+u*o,t[1]=i*s+a*o,t[2]=a*s-i*o,t[3]=u*s-e*o,t},v.rotateY=function(t,n,r){r*=.5;var e=n[0],i=n[1],a=n[2],u=n[3],o=Math.sin(r),s=Math.cos(r);return t[0]=e*s-a*o,t[1]=i*s+u*o,t[2]=a*s+e*o,t[3]=u*s-i*o,t},v.rotateZ=function(t,n,r){r*=.5;var e=n[0],i=n[1],a=n[2],u=n[3],o=Math.sin(r),s=Math.cos(r);return t[0]=e*s+i*o,t[1]=i*s-e*o,t[2]=a*s+u*o,t[3]=u*s-a*o,t},v.calculateW=function(t,n){var r=n[0],e=n[1],i=n[2];return t[0]=r,t[1]=e,t[2]=i,t[3]=-Math.sqrt(Math.abs(1-r*r-e*e-i*i)),t},v.dot=s.dot,v.lerp=s.lerp,v.slerp=function(t,n,r,e){var i,a,u,o,s,c=n[0],f=n[1],h=n[2],l=n[3],v=r[0],d=r[1],m=r[2],M=r[3];return a=c*v+f*d+h*m+l*M,0>a&&(a=-a,v=-v,d=-d,m=-m,M=-M),1-a>1e-6?(i=Math.acos(a),u=Math.sin(i),o=Math.sin((1-e)*i)/u,s=Math.sin(e*i)/u):(o=1-e,s=e),t[0]=o*c+s*v,t[1]=o*f+s*d,t[2]=o*h+s*m,t[3]=o*l+s*M,t},v.invert=function(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],u=r*r+e*e+i*i+a*a,o=u?1/u:0;return t[0]=-r*o,t[1]=-e*o,t[2]=-i*o,t[3]=a*o,t},v.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},v.length=s.length,v.len=v.length,v.squaredLength=s.squaredLength,v.sqrLen=v.squaredLength,v.normalize=s.normalize,v.fromMat3=function(t,n){var r,e=n[0]+n[4]+n[8];if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[7]-n[5])*r,t[1]=(n[2]-n[6])*r,t[2]=(n[3]-n[1])*r;else{var i=0;n[4]>n[0]&&(i=1),n[8]>n[3*i+i]&&(i=2);var a=(i+1)%3,u=(i+2)%3;r=Math.sqrt(n[3*i+i]-n[3*a+a]-n[3*u+u]+1),t[i]=.5*r,r=.5/r,t[3]=(n[3*u+a]-n[3*a+u])*r,t[a]=(n[3*a+i]+n[3*i+a])*r,t[u]=(n[3*u+i]+n[3*i+u])*r}return t},v.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=v)}(r.exports)}(this)},{}],3:[function(t,n){"use strict";function r(){this.aspectRatio=1,this.fieldOfView=45,this.zNear=5,this.zFar=3e3,this.canvas=null,this.gl=null,this.shader=null,this.shaderProgram=null}var e=t("gl-matrix"),i=r.prototype;i.init=function(t,n,r,i){this.canvas=t||document.createElement("canvas");var a=i||{};a.antialias=!0,this.gl=this.canvas.getContext("experimental-webgl",a),void 0!==n&&void 0!==r?this.setSize(n,r):this.setSize(window.innerWidth,window.innerHeight),this.gl.viewport(0,0,this.gl.viewportWidth,this.gl.viewportHeight),this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.clearColor(0,0,0,1),this.gl.clearDepth(1),this.matrix=e.mat4.create(),e.mat4.identity(this.matrix),this.normalMatrix=e.mat3.create(),this.depthTextureExt=this.gl.getExtension("WEBKIT_WEBGL_depth_texture"),this.floatTextureExt=this.gl.getExtension("OES_texture_float"),this.floatTextureLinearExt=this.gl.getExtension("OES_texture_float_linear")},i.getGL=function(){return this.gl},i.setShader=function(t){this.shader=t},i.setShaderProgram=function(t){this.shaderProgram=t},i.setViewport=function(t,n,r,e){this.gl.viewport(t,n,r,e)},i.setMatrices=function(t){this.camera=t},i.rotate=function(t){e.mat4.copy(this.matrix,t),e.mat4.multiply(this.matrix,this.camera.getMatrix(),this.matrix),e.mat3.fromMat4(this.normalMatrix,this.matrix),e.mat3.invert(this.normalMatrix,this.normalMatrix),e.mat3.transpose(this.normalMatrix,this.normalMatrix)},i.enableAlphaBlending=function(){this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)},i.enableAdditiveBlending=function(){this.gl.blendFunc(this.gl.ONE,this.gl.ONE)},i.clear=function(t,n,r,e){this.gl.clearColor(t,n,r,e),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},i.draw=function(t){function n(t,n,r){return void 0===n.cacheAttribLoc&&(n.cacheAttribLoc={}),void 0===n.cacheAttribLoc[r]&&(n.cacheAttribLoc[r]=t.getAttribLocation(n,r)),n.cacheAttribLoc[r]}if(!this.shaderProgram)return void console.warn("Shader program not ready yet");this.gl.uniformMatrix4fv(this.shaderProgram.pMatrixUniform,!1,this.camera.projection||this.camera.getMatrix()),this.gl.uniformMatrix4fv(this.shaderProgram.mvMatrixUniform,!1,this.matrix),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.vBufferPos);var r=n(this.gl,this.shaderProgram,"aVertexPosition");this.gl.vertexAttribPointer(r,t.vBufferPos.itemSize,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(r),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.vBufferUV);var e=n(this.gl,this.shaderProgram,"aTextureCoord");this.gl.vertexAttribPointer(e,t.vBufferUV.itemSize,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(e),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t.iBuffer);for(var i=0;i<t.extraAttributes.length;i++){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.extraAttributes[i].buffer);var a=n(this.gl,this.shaderProgram,t.extraAttributes[i].name);this.gl.vertexAttribPointer(a,t.extraAttributes[i].itemSize,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(a)}t.drawType===this.gl.POINTS?this.gl.drawArrays(t.drawType,0,t.vertexSize):this.gl.drawElements(t.drawType,t.iBuffer.numItems,this.gl.UNSIGNED_SHORT,0)},i.setSize=function(t,n){this._width=t,this._height=n,this.canvas.width=this._width,this.canvas.height=this._height,this.gl.viewportWidth=this._width,this.gl.viewportHeight=this._height,this.gl.viewport(0,0,this._width,this._height),this.aspectRatio=this._width/this._height},i.__defineGetter__("width",function(){return this._width}),i.__defineGetter__("height",function(){return this._height
});var a=null;r.getInstance=function(){return null===a&&(a=new r),a},n.exports=r.getInstance()},{"gl-matrix":2}]},{},[1])(1)});