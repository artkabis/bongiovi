<!-- generateNormal.html -->

<html>
<head>
	<title>bongiovi - Generate Normal Map</title>
	<link rel="stylesheet" type="text/css" href="../css/style.css">
	<script type="text/javascript" src="../js/compile/bongiovi-min-post.js"></script>
	<script type="text/javascript">


	(function() {
		var GL = bongiovi.GL;

		ViewNormal = function() {
			bongiovi.View.call(this, null, bongiovi.ShaderLibs.getShader("simpleColorFrag"));	
		}

		var p = ViewNormal.prototype = new bongiovi.View();

		p._init = function() {
			var size = 200;
			this.mesh = bongiovi.MeshUtils.createPlane(size, size, 1);
			this.mesh.computeNormals();
		};

		p.render = function() {
			this.shader.bind();
			this.shader.uniform("color", "uniform3fv", [1, 0, 0]);
			this.shader.uniform("opacity", "uniform1f", 1);

			GL.draw(this.mesh);
		};
	})();


	var scene, 
		GL,
		camera, 
		view;

	function init() {
		bongiovi.GL.init();
		GL = bongiovi.GL;
		document.body.appendChild(bongiovi.GL.canvas);

		camera = new bongiovi.SimpleCamera(GL.canvas);
		camera.setPerspective(45*Math.PI/180, GL.aspectRatio, 5, 3000);

		var eye            = vec3.clone([0, 0, 500]  );
		var center         = vec3.create( );
		var up             = vec3.clone( [0,-1,0] );
		camera.lookAt(eye, center, up);

		view = new ViewNormal();

		bongiovi.Scheduler.addEF(this, this.loop);
	}


	function loop() {
		GL.clear(0, 0, 0, 1);
		GL.setMatrices(camera);

		view.render();
		// scene.loop();
	}


	</script>
</head>
<body onload="init()">

</body>
</html>