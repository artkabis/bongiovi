(function(c){var f;"undefined"==typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(f={},define(function(){return f})):f="undefined"!=typeof window?window:c:f=exports;(function(c){if(!e)var e=1E-6;if(!h)var h="undefined"!=typeof Float32Array?Float32Array:Array;if(!m)var m=Math.random;var f={setMatrixArrayType:function(a){h=a}};"undefined"!=typeof c&&(c.glMatrix=f);var z=Math.PI/180;f.toRadian=function(a){return a*z};var s={create:function(){var a=new h(2);return a[0]=
0,a[1]=0,a},clone:function(a){var b=new h(2);return b[0]=a[0],b[1]=a[1],b},fromValues:function(a,b){var d=new h(2);return d[0]=a,d[1]=b,d},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a},set:function(a,b,d){return a[0]=b,a[1]=d,a},add:function(a,b,d){return a[0]=b[0]+d[0],a[1]=b[1]+d[1],a},subtract:function(a,b,d){return a[0]=b[0]-d[0],a[1]=b[1]-d[1],a}};s.sub=s.subtract;s.multiply=function(a,b,d){return a[0]=b[0]*d[0],a[1]=b[1]*d[1],a};s.mul=s.multiply;s.divide=function(a,b,d){return a[0]=b[0]/
d[0],a[1]=b[1]/d[1],a};s.div=s.divide;s.min=function(a,b,d){return a[0]=Math.min(b[0],d[0]),a[1]=Math.min(b[1],d[1]),a};s.max=function(a,b,d){return a[0]=Math.max(b[0],d[0]),a[1]=Math.max(b[1],d[1]),a};s.scale=function(a,b,d){return a[0]=b[0]*d,a[1]=b[1]*d,a};s.scaleAndAdd=function(a,b,d,g){return a[0]=b[0]+d[0]*g,a[1]=b[1]+d[1]*g,a};s.distance=function(a,b){var d=b[0]-a[0],g=b[1]-a[1];return Math.sqrt(d*d+g*g)};s.dist=s.distance;s.squaredDistance=function(a,b){var d=b[0]-a[0],g=b[1]-a[1];return d*
d+g*g};s.sqrDist=s.squaredDistance;s.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};s.len=s.length;s.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};s.sqrLen=s.squaredLength;s.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a};s.normalize=function(a,b){var d=b[0],g=b[1],d=d*d+g*g;return 0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d),a};s.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};s.cross=function(a,b,d){b=b[0]*d[1]-b[1]*d[0];return a[0]=a[1]=0,a[2]=b,a};s.lerp=function(a,
b,d,g){var r=b[0];b=b[1];return a[0]=r+g*(d[0]-r),a[1]=b+g*(d[1]-b),a};s.random=function(a,b){b=b||1;var d=2*m()*Math.PI;return a[0]=Math.cos(d)*b,a[1]=Math.sin(d)*b,a};s.transformMat2=function(a,b,d){var g=b[0];b=b[1];return a[0]=d[0]*g+d[2]*b,a[1]=d[1]*g+d[3]*b,a};s.transformMat2d=function(a,b,d){var g=b[0];b=b[1];return a[0]=d[0]*g+d[2]*b+d[4],a[1]=d[1]*g+d[3]*b+d[5],a};s.transformMat3=function(a,b,d){var g=b[0];b=b[1];return a[0]=d[0]*g+d[3]*b+d[6],a[1]=d[1]*g+d[4]*b+d[7],a};s.transformMat4=function(a,
b,d){var g=b[0];b=b[1];return a[0]=d[0]*g+d[4]*b+d[12],a[1]=d[1]*g+d[5]*b+d[13],a};s.forEach=function(){var a=s.create();return function(b,d,g,r,G,c){var e;d||(d=2);g||(g=0);for(r?e=Math.min(r*d+g,b.length):e=b.length;g<e;g+=d)a[0]=b[g],a[1]=b[g+1],G(a,a,c),b[g]=a[0],b[g+1]=a[1];return b}}();s.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};"undefined"!=typeof c&&(c.vec2=s);var n={create:function(){var a=new h(3);return a[0]=0,a[1]=0,a[2]=0,a},clone:function(a){var b=new h(3);return b[0]=a[0],b[1]=
a[1],b[2]=a[2],b},fromValues:function(a,b,d){var g=new h(3);return g[0]=a,g[1]=b,g[2]=d,g},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},set:function(a,b,d,g){return a[0]=b,a[1]=d,a[2]=g,a},add:function(a,b,d){return a[0]=b[0]+d[0],a[1]=b[1]+d[1],a[2]=b[2]+d[2],a},subtract:function(a,b,d){return a[0]=b[0]-d[0],a[1]=b[1]-d[1],a[2]=b[2]-d[2],a}};n.sub=n.subtract;n.multiply=function(a,b,d){return a[0]=b[0]*d[0],a[1]=b[1]*d[1],a[2]=b[2]*d[2],a};n.mul=n.multiply;n.divide=function(a,b,d){return a[0]=
b[0]/d[0],a[1]=b[1]/d[1],a[2]=b[2]/d[2],a};n.div=n.divide;n.min=function(a,b,d){return a[0]=Math.min(b[0],d[0]),a[1]=Math.min(b[1],d[1]),a[2]=Math.min(b[2],d[2]),a};n.max=function(a,b,d){return a[0]=Math.max(b[0],d[0]),a[1]=Math.max(b[1],d[1]),a[2]=Math.max(b[2],d[2]),a};n.scale=function(a,b,d){return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a};n.scaleAndAdd=function(a,b,d,g){return a[0]=b[0]+d[0]*g,a[1]=b[1]+d[1]*g,a[2]=b[2]+d[2]*g,a};n.distance=function(a,b){var d=b[0]-a[0],g=b[1]-a[1],r=b[2]-a[2];return Math.sqrt(d*
d+g*g+r*r)};n.dist=n.distance;n.squaredDistance=function(a,b){var d=b[0]-a[0],g=b[1]-a[1],r=b[2]-a[2];return d*d+g*g+r*r};n.sqrDist=n.squaredDistance;n.length=function(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)};n.len=n.length;n.squaredLength=function(a){var b=a[0],d=a[1];a=a[2];return b*b+d*d+a*a};n.sqrLen=n.squaredLength;n.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a};n.normalize=function(a,b){var d=b[0],g=b[1],r=b[2],d=d*d+g*g+r*r;return 0<d&&(d=1/Math.sqrt(d),
a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d),a};n.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};n.cross=function(a,b,d){var g=b[0],r=b[1];b=b[2];var G=d[0],c=d[1];d=d[2];return a[0]=r*d-b*c,a[1]=b*G-g*d,a[2]=g*c-r*G,a};n.lerp=function(a,b,d,g){var r=b[0],G=b[1];b=b[2];return a[0]=r+g*(d[0]-r),a[1]=G+g*(d[1]-G),a[2]=b+g*(d[2]-b),a};n.random=function(a,b){b=b||1;var d=2*m()*Math.PI,g=2*m()-1,r=Math.sqrt(1-g*g)*b;return a[0]=Math.cos(d)*r,a[1]=Math.sin(d)*r,a[2]=g*b,a};n.transformMat4=function(a,b,
d){var g=b[0],r=b[1];b=b[2];return a[0]=d[0]*g+d[4]*r+d[8]*b+d[12],a[1]=d[1]*g+d[5]*r+d[9]*b+d[13],a[2]=d[2]*g+d[6]*r+d[10]*b+d[14],a};n.transformMat3=function(a,b,d){var g=b[0],r=b[1];b=b[2];return a[0]=g*d[0]+r*d[3]+b*d[6],a[1]=g*d[1]+r*d[4]+b*d[7],a[2]=g*d[2]+r*d[5]+b*d[8],a};n.transformQuat=function(a,b,d){var g=b[0],r=b[1],G=b[2];b=d[0];var c=d[1],e=d[2];d=d[3];var k=d*g+c*G-e*r,h=d*r+e*g-b*G,f=d*G+b*r-c*g,g=-b*g-c*r-e*G;return a[0]=k*d+g*-b+h*-e-f*-c,a[1]=h*d+g*-c+f*-b-k*-e,a[2]=f*d+g*-e+k*
-c-h*-b,a};n.rotateX=function(a,b,d,g){var r=[],c=[];return r[0]=b[0]-d[0],r[1]=b[1]-d[1],r[2]=b[2]-d[2],c[0]=r[0],c[1]=r[1]*Math.cos(g)-r[2]*Math.sin(g),c[2]=r[1]*Math.sin(g)+r[2]*Math.cos(g),a[0]=c[0]+d[0],a[1]=c[1]+d[1],a[2]=c[2]+d[2],a};n.rotateY=function(a,b,d,g){var r=[],c=[];return r[0]=b[0]-d[0],r[1]=b[1]-d[1],r[2]=b[2]-d[2],c[0]=r[2]*Math.sin(g)+r[0]*Math.cos(g),c[1]=r[1],c[2]=r[2]*Math.cos(g)-r[0]*Math.sin(g),a[0]=c[0]+d[0],a[1]=c[1]+d[1],a[2]=c[2]+d[2],a};n.rotateZ=function(a,b,d,g){var r=
[],c=[];return r[0]=b[0]-d[0],r[1]=b[1]-d[1],r[2]=b[2]-d[2],c[0]=r[0]*Math.cos(g)-r[1]*Math.sin(g),c[1]=r[0]*Math.sin(g)+r[1]*Math.cos(g),c[2]=r[2],a[0]=c[0]+d[0],a[1]=c[1]+d[1],a[2]=c[2]+d[2],a};n.forEach=function(){var a=n.create();return function(b,d,g,r,c,e){var k;d||(d=3);g||(g=0);for(r?k=Math.min(r*d+g,b.length):k=b.length;g<k;g+=d)a[0]=b[g],a[1]=b[g+1],a[2]=b[g+2],c(a,a,e),b[g]=a[0],b[g+1]=a[1],b[g+2]=a[2];return b}}();n.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};"undefined"!=
typeof c&&(c.vec3=n);var p={create:function(){var a=new h(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},clone:function(a){var b=new h(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},fromValues:function(a,b,d,g){var r=new h(4);return r[0]=a,r[1]=b,r[2]=d,r[3]=g,r},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},set:function(a,b,d,g,r){return a[0]=b,a[1]=d,a[2]=g,a[3]=r,a},add:function(a,b,d){return a[0]=b[0]+d[0],a[1]=b[1]+d[1],a[2]=b[2]+d[2],a[3]=b[3]+d[3],a},subtract:function(a,
b,d){return a[0]=b[0]-d[0],a[1]=b[1]-d[1],a[2]=b[2]-d[2],a[3]=b[3]-d[3],a}};p.sub=p.subtract;p.multiply=function(a,b,d){return a[0]=b[0]*d[0],a[1]=b[1]*d[1],a[2]=b[2]*d[2],a[3]=b[3]*d[3],a};p.mul=p.multiply;p.divide=function(a,b,d){return a[0]=b[0]/d[0],a[1]=b[1]/d[1],a[2]=b[2]/d[2],a[3]=b[3]/d[3],a};p.div=p.divide;p.min=function(a,b,d){return a[0]=Math.min(b[0],d[0]),a[1]=Math.min(b[1],d[1]),a[2]=Math.min(b[2],d[2]),a[3]=Math.min(b[3],d[3]),a};p.max=function(a,b,d){return a[0]=Math.max(b[0],d[0]),
a[1]=Math.max(b[1],d[1]),a[2]=Math.max(b[2],d[2]),a[3]=Math.max(b[3],d[3]),a};p.scale=function(a,b,d){return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a};p.scaleAndAdd=function(a,b,d,g){return a[0]=b[0]+d[0]*g,a[1]=b[1]+d[1]*g,a[2]=b[2]+d[2]*g,a[3]=b[3]+d[3]*g,a};p.distance=function(a,b){var d=b[0]-a[0],g=b[1]-a[1],r=b[2]-a[2],c=b[3]-a[3];return Math.sqrt(d*d+g*g+r*r+c*c)};p.dist=p.distance;p.squaredDistance=function(a,b){var d=b[0]-a[0],g=b[1]-a[1],r=b[2]-a[2],c=b[3]-a[3];return d*d+g*g+r*
r+c*c};p.sqrDist=p.squaredDistance;p.length=function(a){var b=a[0],d=a[1],g=a[2];a=a[3];return Math.sqrt(b*b+d*d+g*g+a*a)};p.len=p.length;p.squaredLength=function(a){var b=a[0],d=a[1],g=a[2];a=a[3];return b*b+d*d+g*g+a*a};p.sqrLen=p.squaredLength;p.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a};p.normalize=function(a,b){var d=b[0],g=b[1],r=b[2],c=b[3],d=d*d+g*g+r*r+c*c;return 0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d),a};p.dot=function(a,b){return a[0]*
b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};p.lerp=function(a,b,d,g){var r=b[0],c=b[1],e=b[2];b=b[3];return a[0]=r+g*(d[0]-r),a[1]=c+g*(d[1]-c),a[2]=e+g*(d[2]-e),a[3]=b+g*(d[3]-b),a};p.random=function(a,b){return b=b||1,a[0]=m(),a[1]=m(),a[2]=m(),a[3]=m(),p.normalize(a,a),p.scale(a,a,b),a};p.transformMat4=function(a,b,d){var g=b[0],r=b[1],c=b[2];b=b[3];return a[0]=d[0]*g+d[4]*r+d[8]*c+d[12]*b,a[1]=d[1]*g+d[5]*r+d[9]*c+d[13]*b,a[2]=d[2]*g+d[6]*r+d[10]*c+d[14]*b,a[3]=d[3]*g+d[7]*r+d[11]*c+d[15]*b,a};p.transformQuat=
function(a,b,d){var g=b[0],r=b[1],c=b[2];b=d[0];var e=d[1],k=d[2];d=d[3];var h=d*g+e*c-k*r,f=d*r+k*g-b*c,m=d*c+b*r-e*g,g=-b*g-e*r-k*c;return a[0]=h*d+g*-b+f*-k-m*-e,a[1]=f*d+g*-e+m*-b-h*-k,a[2]=m*d+g*-k+h*-e-f*-b,a};p.forEach=function(){var a=p.create();return function(b,d,g,r,c,e){var k;d||(d=4);g||(g=0);for(r?k=Math.min(r*d+g,b.length):k=b.length;g<k;g+=d)a[0]=b[g],a[1]=b[g+1],a[2]=b[g+2],a[3]=b[g+3],c(a,a,e),b[g]=a[0],b[g+1]=a[1],b[g+2]=a[2],b[g+3]=a[3];return b}}();p.str=function(a){return"vec4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!=typeof c&&(c.vec4=p);f={create:function(){var a=new h(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},clone:function(a){var b=new h(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},transpose:function(a,b){if(a===b){var d=b[1];a[1]=b[2];a[2]=d}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},invert:function(a,b){var d=
b[0],g=b[1],r=b[2],c=b[3],e=d*c-r*g;return e?(e=1/e,a[0]=c*e,a[1]=-g*e,a[2]=-r*e,a[3]=d*e,a):null},adjoint:function(a,b){var d=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=d,a},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},multiply:function(a,b,d){var g=b[0],r=b[1],c=b[2];b=b[3];var e=d[0],k=d[1],h=d[2];d=d[3];return a[0]=g*e+c*k,a[1]=r*e+b*k,a[2]=g*h+c*d,a[3]=r*h+b*d,a}};f.mul=f.multiply;f.rotate=function(a,b,d){var g=b[0],r=b[1],c=b[2];b=b[3];var e=Math.sin(d);d=Math.cos(d);return a[0]=
g*d+c*e,a[1]=r*d+b*e,a[2]=g*-e+c*d,a[3]=r*-e+b*d,a};f.scale=function(a,b,d){var g=b[1],r=b[2],c=b[3],e=d[0];d=d[1];return a[0]=b[0]*e,a[1]=g*e,a[2]=r*d,a[3]=c*d,a};f.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};f.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};f.LDU=function(a,b,d,g){return a[2]=g[2]/g[0],d[0]=g[0],d[1]=g[1],d[3]=g[3]-a[2]*d[1],[a,b,d]};"undefined"!=typeof c&&(c.mat2=f);f={create:function(){var a=new h(6);
return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},clone:function(a){var b=new h(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},invert:function(a,b){var d=b[0],g=b[1],r=b[2],c=b[3],e=b[4],k=b[5],h=d*c-g*r;return h?(h=1/h,a[0]=c*h,a[1]=-g*h,a[2]=-r*h,a[3]=d*h,a[4]=(r*k-c*e)*h,a[5]=(g*e-d*k)*h,a):null},determinant:function(a){return a[0]*
a[3]-a[1]*a[2]},multiply:function(a,b,d){var g=b[0],r=b[1],c=b[2],e=b[3],k=b[4];b=b[5];var h=d[0],f=d[1],m=d[2],t=d[3],L=d[4];d=d[5];return a[0]=g*h+c*f,a[1]=r*h+e*f,a[2]=g*m+c*t,a[3]=r*m+e*t,a[4]=g*L+c*d+k,a[5]=r*L+e*d+b,a}};f.mul=f.multiply;f.rotate=function(a,b,d){var g=b[0],c=b[1],e=b[2],k=b[3],h=b[4];b=b[5];var f=Math.sin(d);d=Math.cos(d);return a[0]=g*d+e*f,a[1]=c*d+k*f,a[2]=g*-f+e*d,a[3]=c*-f+k*d,a[4]=h,a[5]=b,a};f.scale=function(a,b,d){var g=b[1],c=b[2],e=b[3],k=b[4],h=b[5],f=d[0];d=d[1];
return a[0]=b[0]*f,a[1]=g*f,a[2]=c*d,a[3]=e*d,a[4]=k,a[5]=h,a};f.translate=function(a,b,d){var g=b[0],c=b[1],e=b[2],k=b[3],h=b[4];b=b[5];var f=d[0];d=d[1];return a[0]=g,a[1]=c,a[2]=e,a[3]=k,a[4]=g*f+e*d+h,a[5]=c*f+k*d+b,a};f.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};f.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};"undefined"!=typeof c&&(c.mat2d=f);var w={create:function(){var a=
new h(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},fromMat4:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},clone:function(a){var b=new h(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=
0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},transpose:function(a,b){if(a===b){var d=b[1],g=b[2],c=b[5];a[1]=b[3];a[2]=b[6];a[3]=d;a[5]=b[7];a[6]=g;a[7]=c}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var d=b[0],g=b[1],c=b[2],e=b[3],k=b[4],h=b[5],f=b[6],m=b[7],C=b[8],t=C*k-h*m,L=-C*e+h*f,v=m*e-k*f,l=d*t+g*L+c*v;return l?(l=1/l,a[0]=t*l,a[1]=(-C*g+c*m)*l,a[2]=(h*g-c*k)*l,a[3]=L*l,a[4]=(C*d-c*f)*l,a[5]=(-h*d+c*e)*l,a[6]=
v*l,a[7]=(-m*d+g*f)*l,a[8]=(k*d-g*e)*l,a):null},adjoint:function(a,b){var d=b[0],g=b[1],c=b[2],e=b[3],k=b[4],h=b[5],f=b[6],m=b[7],C=b[8];return a[0]=k*C-h*m,a[1]=c*m-g*C,a[2]=g*h-c*k,a[3]=h*f-e*C,a[4]=d*C-c*f,a[5]=c*e-d*h,a[6]=e*m-k*f,a[7]=g*f-d*m,a[8]=d*k-g*e,a},determinant:function(a){var b=a[3],d=a[4],g=a[5],c=a[6],e=a[7],k=a[8];return a[0]*(k*d-g*e)+a[1]*(-k*b+g*c)+a[2]*(e*b-d*c)},multiply:function(a,b,d){var g=b[0],c=b[1],e=b[2],k=b[3],h=b[4],f=b[5],m=b[6],C=b[7];b=b[8];var t=d[0],l=d[1],v=d[2],
n=d[3],P=d[4],s=d[5],p=d[6],q=d[7];d=d[8];return a[0]=t*g+l*k+v*m,a[1]=t*c+l*h+v*C,a[2]=t*e+l*f+v*b,a[3]=n*g+P*k+s*m,a[4]=n*c+P*h+s*C,a[5]=n*e+P*f+s*b,a[6]=p*g+q*k+d*m,a[7]=p*c+q*h+d*C,a[8]=p*e+q*f+d*b,a}};w.mul=w.multiply;w.translate=function(a,b,d){var g=b[0],c=b[1],e=b[2],k=b[3],h=b[4],f=b[5],m=b[6],C=b[7];b=b[8];var t=d[0];d=d[1];return a[0]=g,a[1]=c,a[2]=e,a[3]=k,a[4]=h,a[5]=f,a[6]=t*g+d*k+m,a[7]=t*c+d*h+C,a[8]=t*e+d*f+b,a};w.rotate=function(a,b,d){var g=b[0],c=b[1],e=b[2],k=b[3],h=b[4],f=b[5],
m=b[6],C=b[7];b=b[8];var t=Math.sin(d);d=Math.cos(d);return a[0]=d*g+t*k,a[1]=d*c+t*h,a[2]=d*e+t*f,a[3]=d*k-t*g,a[4]=d*h-t*c,a[5]=d*f-t*e,a[6]=m,a[7]=C,a[8]=b,a};w.scale=function(a,b,d){var g=d[0];d=d[1];return a[0]=g*b[0],a[1]=g*b[1],a[2]=g*b[2],a[3]=d*b[3],a[4]=d*b[4],a[5]=d*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a};w.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a};w.fromQuat=function(a,b){var d=b[0],g=b[1],c=b[2],e=b[3],k=d+d,h=g+g,
f=c+c,d=d*k,m=g*k,g=g*h,C=c*k,t=c*h,c=c*f,k=e*k,h=e*h,e=e*f;return a[0]=1-g-c,a[3]=m-e,a[6]=C+h,a[1]=m+e,a[4]=1-d-c,a[7]=t-k,a[2]=C-h,a[5]=t+k,a[8]=1-d-g,a};w.normalFromMat4=function(a,b){var d=b[0],g=b[1],c=b[2],e=b[3],k=b[4],h=b[5],f=b[6],m=b[7],C=b[8],t=b[9],l=b[10],v=b[11],n=b[12],s=b[13],p=b[14],q=b[15],x=d*h-g*k,y=d*f-c*k,A=d*m-e*k,B=g*f-c*h,u=g*m-e*h,z=c*m-e*f,w=C*s-t*n,E=C*p-l*n,C=C*q-v*n,F=t*p-l*s,t=t*q-v*s,l=l*q-v*p;return(v=x*l-y*t+A*F+B*C-u*E+z*w)?(v=1/v,a[0]=(h*l-f*t+m*F)*v,a[1]=(f*C-
k*l-m*E)*v,a[2]=(k*t-h*C+m*w)*v,a[3]=(c*t-g*l-e*F)*v,a[4]=(d*l-c*C+e*E)*v,a[5]=(g*C-d*t-e*w)*v,a[6]=(s*z-p*u+q*B)*v,a[7]=(p*A-n*z-q*y)*v,a[8]=(n*u-s*A+q*x)*v,a):null};w.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};w.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};"undefined"!=typeof c&&
(c.mat3=w);var u={create:function(){var a=new h(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},clone:function(a){var b=new h(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],
a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},transpose:function(a,b){if(a===b){var d=b[1],g=b[2],c=b[3],e=b[6],k=b[7],h=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=d;a[6]=b[9];a[7]=b[13];a[8]=g;a[9]=e;a[11]=b[14];a[12]=c;a[13]=k;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=
b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},invert:function(a,b){var d=b[0],g=b[1],c=b[2],e=b[3],k=b[4],h=b[5],f=b[6],m=b[7],l=b[8],t=b[9],n=b[10],v=b[11],s=b[12],p=b[13],q=b[14],K=b[15],x=d*h-g*k,y=d*f-c*k,A=d*m-e*k,B=g*f-c*h,u=g*m-e*h,z=c*m-e*f,w=l*p-t*s,E=l*q-n*s,F=l*K-v*s,H=t*q-n*p,I=t*K-v*p,J=n*K-v*q,D=x*J-y*I+A*H+B*F-u*E+z*w;return D?(D=1/D,a[0]=(h*J-f*I+m*H)*D,a[1]=(c*I-g*J-e*H)*D,a[2]=(p*z-q*u+K*B)*D,a[3]=(n*u-t*z-v*B)*
D,a[4]=(f*F-k*J-m*E)*D,a[5]=(d*J-c*F+e*E)*D,a[6]=(q*A-s*z-K*y)*D,a[7]=(l*z-n*A+v*y)*D,a[8]=(k*I-h*F+m*w)*D,a[9]=(g*F-d*I-e*w)*D,a[10]=(s*u-p*A+K*x)*D,a[11]=(t*A-l*u-v*x)*D,a[12]=(h*E-k*H-f*w)*D,a[13]=(d*H-g*E+c*w)*D,a[14]=(p*y-s*B-q*x)*D,a[15]=(l*B-t*y+n*x)*D,a):null},adjoint:function(a,b){var d=b[0],g=b[1],c=b[2],e=b[3],k=b[4],h=b[5],f=b[6],m=b[7],l=b[8],t=b[9],n=b[10],v=b[11],s=b[12],p=b[13],q=b[14],u=b[15];return a[0]=h*(n*u-v*q)-t*(f*u-m*q)+p*(f*v-m*n),a[1]=-(g*(n*u-v*q)-t*(c*u-e*q)+p*(c*v-e*
n)),a[2]=g*(f*u-m*q)-h*(c*u-e*q)+p*(c*m-e*f),a[3]=-(g*(f*v-m*n)-h*(c*v-e*n)+t*(c*m-e*f)),a[4]=-(k*(n*u-v*q)-l*(f*u-m*q)+s*(f*v-m*n)),a[5]=d*(n*u-v*q)-l*(c*u-e*q)+s*(c*v-e*n),a[6]=-(d*(f*u-m*q)-k*(c*u-e*q)+s*(c*m-e*f)),a[7]=d*(f*v-m*n)-k*(c*v-e*n)+l*(c*m-e*f),a[8]=k*(t*u-v*p)-l*(h*u-m*p)+s*(h*v-m*t),a[9]=-(d*(t*u-v*p)-l*(g*u-e*p)+s*(g*v-e*t)),a[10]=d*(h*u-m*p)-k*(g*u-e*p)+s*(g*m-e*h),a[11]=-(d*(h*v-m*t)-k*(g*v-e*t)+l*(g*m-e*h)),a[12]=-(k*(t*q-n*p)-l*(h*q-f*p)+s*(h*n-f*t)),a[13]=d*(t*q-n*p)-l*(g*q-
c*p)+s*(g*n-c*t),a[14]=-(d*(h*q-f*p)-k*(g*q-c*p)+s*(g*f-c*h)),a[15]=d*(h*n-f*t)-k*(g*n-c*t)+l*(g*f-c*h),a},determinant:function(a){var b=a[0],d=a[1],g=a[2],c=a[3],e=a[4],k=a[5],h=a[6],f=a[7],m=a[8],l=a[9],t=a[10],n=a[11],v=a[12],p=a[13],q=a[14];a=a[15];return(b*k-d*e)*(t*a-n*q)-(b*h-g*e)*(l*a-n*p)+(b*f-c*e)*(l*q-t*p)+(d*h-g*k)*(m*a-n*v)-(d*f-c*k)*(m*q-t*v)+(g*f-c*h)*(m*p-l*v)},multiply:function(a,b,d){var g=b[0],c=b[1],e=b[2],k=b[3],h=b[4],f=b[5],m=b[6],l=b[7],t=b[8],n=b[9],v=b[10],p=b[11],q=b[12],
s=b[13],u=b[14];b=b[15];var x=d[0],y=d[1],A=d[2],B=d[3];return a[0]=x*g+y*h+A*t+B*q,a[1]=x*c+y*f+A*n+B*s,a[2]=x*e+y*m+A*v+B*u,a[3]=x*k+y*l+A*p+B*b,x=d[4],y=d[5],A=d[6],B=d[7],a[4]=x*g+y*h+A*t+B*q,a[5]=x*c+y*f+A*n+B*s,a[6]=x*e+y*m+A*v+B*u,a[7]=x*k+y*l+A*p+B*b,x=d[8],y=d[9],A=d[10],B=d[11],a[8]=x*g+y*h+A*t+B*q,a[9]=x*c+y*f+A*n+B*s,a[10]=x*e+y*m+A*v+B*u,a[11]=x*k+y*l+A*p+B*b,x=d[12],y=d[13],A=d[14],B=d[15],a[12]=x*g+y*h+A*t+B*q,a[13]=x*c+y*f+A*n+B*s,a[14]=x*e+y*m+A*v+B*u,a[15]=x*k+y*l+A*p+B*b,a}};u.mul=
u.multiply;u.translate=function(a,b,d){var g=d[0],c=d[1];d=d[2];var e,k,h,f,m,l,t,n,p,q,s,u;return b===a?(a[12]=b[0]*g+b[4]*c+b[8]*d+b[12],a[13]=b[1]*g+b[5]*c+b[9]*d+b[13],a[14]=b[2]*g+b[6]*c+b[10]*d+b[14],a[15]=b[3]*g+b[7]*c+b[11]*d+b[15]):(e=b[0],k=b[1],h=b[2],f=b[3],m=b[4],l=b[5],t=b[6],n=b[7],p=b[8],q=b[9],s=b[10],u=b[11],a[0]=e,a[1]=k,a[2]=h,a[3]=f,a[4]=m,a[5]=l,a[6]=t,a[7]=n,a[8]=p,a[9]=q,a[10]=s,a[11]=u,a[12]=e*g+m*c+p*d+b[12],a[13]=k*g+l*c+q*d+b[13],a[14]=h*g+t*c+s*d+b[14],a[15]=f*g+n*c+u*
d+b[15]),a};u.scale=function(a,b,d){var g=d[0],c=d[1];d=d[2];return a[0]=b[0]*g,a[1]=b[1]*g,a[2]=b[2]*g,a[3]=b[3]*g,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*d,a[9]=b[9]*d,a[10]=b[10]*d,a[11]=b[11]*d,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};u.rotate=function(a,b,d,g){var c=g[0],k=g[1];g=g[2];var h=Math.sqrt(c*c+k*k+g*g),f,m,l,n,t,p,q,s,u,z,w,x,y,A,B,M,N,O,E,F,H,I,J,D;return Math.abs(h)<e?null:(h=1/h,c*=h,k*=h,g*=h,f=Math.sin(d),m=Math.cos(d),l=1-m,n=b[0],t=b[1],p=b[2],q=
b[3],s=b[4],u=b[5],z=b[6],w=b[7],x=b[8],y=b[9],A=b[10],B=b[11],M=c*c*l+m,N=k*c*l+g*f,O=g*c*l-k*f,E=c*k*l-g*f,F=k*k*l+m,H=g*k*l+c*f,I=c*g*l+k*f,J=k*g*l-c*f,D=g*g*l+m,a[0]=n*M+s*N+x*O,a[1]=t*M+u*N+y*O,a[2]=p*M+z*N+A*O,a[3]=q*M+w*N+B*O,a[4]=n*E+s*F+x*H,a[5]=t*E+u*F+y*H,a[6]=p*E+z*F+A*H,a[7]=q*E+w*F+B*H,a[8]=n*I+s*J+x*D,a[9]=t*I+u*J+y*D,a[10]=p*I+z*J+A*D,a[11]=q*I+w*J+B*D,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)};u.rotateX=function(a,b,d){var g=Math.sin(d);d=Math.cos(d);var c=b[4],
e=b[5],k=b[6],h=b[7],f=b[8],m=b[9],l=b[10],n=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=c*d+f*g,a[5]=e*d+m*g,a[6]=k*d+l*g,a[7]=h*d+n*g,a[8]=f*d-c*g,a[9]=m*d-e*g,a[10]=l*d-k*g,a[11]=n*d-h*g,a};u.rotateY=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var e=b[0],k=b[1],h=b[2],f=b[3],m=b[8],l=b[9],n=b[10],t=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=e*d-m*c,
a[1]=k*d-l*c,a[2]=h*d-n*c,a[3]=f*d-t*c,a[8]=e*c+m*d,a[9]=k*c+l*d,a[10]=h*c+n*d,a[11]=f*c+t*d,a};u.rotateZ=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var e=b[0],k=b[1],h=b[2],f=b[3],m=b[4],l=b[5],n=b[6],t=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=e*d+m*c,a[1]=k*d+l*c,a[2]=h*d+n*c,a[3]=f*d+t*c,a[4]=m*d-e*c,a[5]=l*d-k*c,a[6]=n*d-h*c,a[7]=t*d-f*c,a};u.fromRotationTranslation=function(a,b,d){var c=b[0],e=b[1],k=b[2],h=b[3],
f=c+c,m=e+e,l=k+k;b=c*f;var n=c*m,c=c*l,t=e*m,e=e*l,k=k*l,f=h*f,m=h*m,h=h*l;return a[0]=1-(t+k),a[1]=n+h,a[2]=c-m,a[3]=0,a[4]=n-h,a[5]=1-(b+k),a[6]=e+f,a[7]=0,a[8]=c+m,a[9]=e-f,a[10]=1-(b+t),a[11]=0,a[12]=d[0],a[13]=d[1],a[14]=d[2],a[15]=1,a};u.fromQuat=function(a,b){var d=b[0],c=b[1],e=b[2],k=b[3],h=d+d,f=c+c,m=e+e,d=d*h,l=c*h,c=c*f,n=e*h,t=e*f,e=e*m,h=k*h,f=k*f,k=k*m;return a[0]=1-c-e,a[1]=l+k,a[2]=n-f,a[3]=0,a[4]=l-k,a[5]=1-d-e,a[6]=t+h,a[7]=0,a[8]=n+f,a[9]=t-h,a[10]=1-d-c,a[11]=0,a[12]=0,a[13]=
0,a[14]=0,a[15]=1,a};u.frustum=function(a,b,d,c,e,k,h){var f=1/(d-b),m=1/(e-c),l=1/(k-h);return a[0]=2*k*f,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*k*m,a[6]=0,a[7]=0,a[8]=(d+b)*f,a[9]=(e+c)*m,a[10]=(h+k)*l,a[11]=-1,a[12]=0,a[13]=0,a[14]=h*k*2*l,a[15]=0,a};u.perspective=function(a,b,d,c,e){b=1/Math.tan(b/2);var k=1/(c-e);return a[0]=b/d,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+c)*k,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*c*k,a[15]=0,a};u.ortho=function(a,b,d,c,e,k,h){var f=1/(b-
d),m=1/(c-e),l=1/(k-h);return a[0]=-2*f,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*m,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*l,a[11]=0,a[12]=(b+d)*f,a[13]=(e+c)*m,a[14]=(h+k)*l,a[15]=1,a};u.lookAt=function(a,b,d,c){var k,h,f,m,l,n,p,t,q,s,z=b[0],w=b[1];b=b[2];var Q=c[0],K=c[1];c=c[2];var x=d[0],y=d[1];d=d[2];return Math.abs(z-x)<e&&Math.abs(w-y)<e&&Math.abs(b-d)<e?u.identity(a):(p=z-x,t=w-y,q=b-d,s=1/Math.sqrt(p*p+t*t+q*q),p*=s,t*=s,q*=s,k=K*q-c*t,h=c*p-Q*q,f=Q*t-K*p,s=Math.sqrt(k*k+h*h+f*f),s?(s=1/s,k*=s,h*=
s,f*=s):(k=0,h=0,f=0),m=t*f-q*h,l=q*k-p*f,n=p*h-t*k,s=Math.sqrt(m*m+l*l+n*n),s?(s=1/s,m*=s,l*=s,n*=s):(m=0,l=0,n=0),a[0]=k,a[1]=m,a[2]=p,a[3]=0,a[4]=h,a[5]=l,a[6]=t,a[7]=0,a[8]=f,a[9]=n,a[10]=q,a[11]=0,a[12]=-(k*z+h*w+f*b),a[13]=-(m*z+l*w+n*b),a[14]=-(p*z+t*w+q*b),a[15]=1,a)};u.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};u.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};"undefined"!=typeof c&&(c.mat4=u);var q={create:function(){var a=new h(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}};q.rotationTo=function(){var a=n.create(),b=n.fromValues(1,0,0),d=n.fromValues(0,1,0);return function(c,e,
k){var h=n.dot(e,k);return-0.999999>h?(n.cross(a,b,e),1E-6>n.length(a)&&n.cross(a,d,e),n.normalize(a,a),q.setAxisAngle(c,a,Math.PI),c):0.999999<h?(c[0]=0,c[1]=0,c[2]=0,c[3]=1,c):(n.cross(a,e,k),c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=1+h,q.normalize(c,c))}}();q.setAxes=function(){var a=w.create();return function(b,d,c,e){return a[0]=c[0],a[3]=c[1],a[6]=c[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=-d[0],a[5]=-d[1],a[8]=-d[2],q.normalize(b,q.fromMat3(b,a))}}();q.clone=p.clone;q.fromValues=p.fromValues;q.copy=
p.copy;q.set=p.set;q.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a};q.setAxisAngle=function(a,b,d){d*=0.5;var c=Math.sin(d);return a[0]=c*b[0],a[1]=c*b[1],a[2]=c*b[2],a[3]=Math.cos(d),a};q.add=p.add;q.multiply=function(a,b,d){var c=b[0],e=b[1],k=b[2];b=b[3];var h=d[0],f=d[1],m=d[2];d=d[3];return a[0]=c*d+b*h+e*m-k*f,a[1]=e*d+b*f+k*h-c*m,a[2]=k*d+b*m+c*f-e*h,a[3]=b*d-c*h-e*f-k*m,a};q.mul=q.multiply;q.scale=p.scale;q.rotateX=function(a,b,d){d*=0.5;var c=b[0],e=b[1],k=b[2];b=b[3];var h=Math.sin(d);
d=Math.cos(d);return a[0]=c*d+b*h,a[1]=e*d+k*h,a[2]=k*d-e*h,a[3]=b*d-c*h,a};q.rotateY=function(a,b,d){d*=0.5;var c=b[0],e=b[1],k=b[2];b=b[3];var h=Math.sin(d);d=Math.cos(d);return a[0]=c*d-k*h,a[1]=e*d+b*h,a[2]=k*d+c*h,a[3]=b*d-e*h,a};q.rotateZ=function(a,b,d){d*=0.5;var c=b[0],e=b[1],k=b[2];b=b[3];var h=Math.sin(d);d=Math.cos(d);return a[0]=c*d+e*h,a[1]=e*d-c*h,a[2]=k*d+b*h,a[3]=b*d-k*h,a};q.calculateW=function(a,b){var d=b[0],c=b[1],e=b[2];return a[0]=d,a[1]=c,a[2]=e,a[3]=-Math.sqrt(Math.abs(1-
d*d-c*c-e*e)),a};q.dot=p.dot;q.lerp=p.lerp;q.slerp=function(a,b,d,c){var e=b[0],k=b[1],h=b[2];b=b[3];var f=d[0],m=d[1],l=d[2];d=d[3];var n,p,s,q,u;return p=e*f+k*m+h*l+b*d,0>p&&(p=-p,f=-f,m=-m,l=-l,d=-d),1E-6<1-p?(n=Math.acos(p),s=Math.sin(n),q=Math.sin((1-c)*n)/s,u=Math.sin(c*n)/s):(q=1-c,u=c),a[0]=q*e+u*f,a[1]=q*k+u*m,a[2]=q*h+u*l,a[3]=q*b+u*d,a};q.invert=function(a,b){var d=b[0],c=b[1],e=b[2],k=b[3],h=d*d+c*c+e*e+k*k,h=h?1/h:0;return a[0]=-d*h,a[1]=-c*h,a[2]=-e*h,a[3]=k*h,a};q.conjugate=function(a,
b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a};q.length=p.length;q.len=q.length;q.squaredLength=p.squaredLength;q.sqrLen=q.squaredLength;q.normalize=p.normalize;q.fromMat3=function(a,b){var d=b[0]+b[4]+b[8];if(0<d)d=Math.sqrt(d+1),a[3]=0.5*d,d=0.5/d,a[0]=(b[7]-b[5])*d,a[1]=(b[2]-b[6])*d,a[2]=(b[3]-b[1])*d;else{var c=0;b[4]>b[0]&&(c=1);b[8]>b[3*c+c]&&(c=2);var e=(c+1)%3,k=(c+2)%3,d=Math.sqrt(b[3*c+c]-b[3*e+e]-b[3*k+k]+1);a[c]=0.5*d;d=0.5/d;a[3]=(b[3*k+e]-b[3*e+k])*d;a[e]=(b[3*e+c]+b[3*c+e])*
d;a[k]=(b[3*k+c]+b[3*c+k])*d}return a};q.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!=typeof c&&(c.quat=q)})(f)})(this);bongiovi=window.bongiovi||{};
(function(){SimpleImageLoader=function(){this._imgs={};this._toLoadCount=this._loadedCount=0;this._callbackProgress=this._callback=this._scope=void 0};var c=SimpleImageLoader.prototype;c.load=function(c,k,e,h){this._imgs={};this._loadedCount=0;this._toLoadCount=c.length;this._scope=k;this._callback=e;this._callbackProgress=h;var m=this;for(k=0;k<c.length;k++){e=new Image;e.onload=function(){m._onImageLoaded()};h=c[k];var l=h.split("/"),l=l[l.length-1].split(".")[0];this._imgs[l]=e;e.src=h}};c._onImageLoaded=
function(){this._loadedCount++;if(this._loadedCount==this._toLoadCount)this._callback.call(this._scope,this._imgs);else{var c=this._loadedCount/this._toLoadCount;this._callbackProgress&&this._callbackProgress.call(this._scope,c)}}})();bongiovi.SimpleImageLoader=new SimpleImageLoader;bongiovi.Utils={};
(function(){var c=function(c,e){this._easing=e||0.1;this._targetValue=this._value=c;bongiovi.Scheduler.addEF(this,this._update)},f=c.prototype;f._update=function(){this._checkLimit();this._value+=(this._targetValue-this._value)*this._easing};f.setTo=function(c){this._targetValue=this._value=c};f.add=function(c){this._targetValue+=c};f.limit=function(c,e){this._min=c;this._max=e;this._checkLimit()};f._checkLimit=function(){this._min&&this._targetValue<this._min&&(this._targetValue=this._min);this._max&&
this._targetValue>this._max&&(this._targetValue=this._max)};f.__defineGetter__("value",function(){return this._value});f.__defineGetter__("targetValue",function(){return this._targetValue});f.__defineSetter__("value",function(c){this._targetValue=c});bongiovi.EaseNumber=c})();bongiovi=window.bongiovi||{};void 0==window.requestAnimFrame&&(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(c){window.setTimeout(c,1E3/60)}}());
(function(){var c=function(){this.FRAMERATE=60;this._delayTasks=[];this._nextTasks=[];this._deferTasks=[];this._highTasks=[];this._usurpTask=[];this._enterframeTasks=[];this._idTable=0;requestAnimFrame(this._loop.bind(this))},f=c.prototype;f._loop=function(){requestAnimFrame(this._loop.bind(this));this._process()};f._process=function(){for(var c=0;c<this._enterframeTasks.length;c++){var e=this._enterframeTasks[c];null!=e&&void 0!=e&&e.func.apply(e.scope,e.params)}for(;0<this._highTasks.length;)e=
this._highTasks.pop(),e.func.apply(e.scope,e.params);for(var h=(new Date).getTime(),c=0;c<this._delayTasks.length;c++)e=this._delayTasks[c],h-e.time>e.delay&&(e.func.apply(e.scope,e.params),this._delayTasks.splice(c,1));h=(new Date).getTime();for(c=1E3/this.FRAMERATE;0<this._deferTasks.length;){var e=this._deferTasks.shift(),f=(new Date).getTime();if(f-h<c)e.func.apply(e.scope,e.params);else{this._deferTasks.unshift(e);break}}h=(new Date).getTime();for(c=1E3/this.FRAMERATE;0<this._usurpTask.length;)if(e=
this._usurpTask.shift(),f=(new Date).getTime(),f-h<c)e.func.apply(e.scope,e.params);else break;this._highTasks=this._highTasks.concat(this._nextTasks);this._nextTasks=[];this._usurpTask=[]};f.addEF=function(c,e,h){h=h||[];var f=this._idTable;this._enterframeTasks[f]={scope:c,func:e,params:h};this._idTable++;return f};f.removeEF=function(c){void 0!=this._enterframeTasks[c]&&(this._enterframeTasks[c]=null);return-1};f.delay=function(c,e,h,f){var l=(new Date).getTime();this._delayTasks.push({scope:c,
func:e,params:h,delay:f,time:l})};f.defer=function(c,e,h){this._deferTasks.push({scope:c,func:e,params:h})};f.next=function(c,e,h){this._nextTasks.push({scope:c,func:e,params:h})};f.usurp=function(c,e,h){this._usurpTask.push({scope:c,func:e,params:h})};bongiovi.Scheduler=new c})();bongiovi=window.bongiovi||{};
(function(){var c=null,f=function(){this.aspectRatio=window.innerWidth/window.innerHeight;this.fieldOfView=45;this.zNear=5;this.zFar=3E3;this.gl=this.canvas=null;this.H=this.W=0;this.shaderProgram=this.shader=null},k=f.prototype;k.init=function(c){this.canvas=c;this.gl=this.canvas.getContext("experimental-webgl",{antialias:!0});this.resize();this.gl.getParameter(this.gl.SAMPLES);this.gl.getContextAttributes();this.gl.viewport(0,0,this.gl.viewportWidth,this.gl.viewportHeight);this.gl.enable(this.gl.DEPTH_TEST);
this.gl.enable(this.gl.CULL_FACE);this.gl.enable(this.gl.BLEND);this.gl.clearColor(0,0,0,1);this.gl.clearDepth(1);this.matrix=mat4.create();mat4.identity(this.matrix);this.depthTextureExt=this.gl.getExtension("WEBKIT_WEBGL_depth_texture");this.floatTextureExt=this.gl.getExtension("OES_texture_float");this.enableAlphaBlending();var k=this;window.addEventListener("resize",function(){k.resize()})};k.getGL=function(){return this.gl};k.setShader=function(c){this.shader=c};k.setShaderProgram=function(c){this.shaderProgram=
c};k.setViewport=function(c,k,f,l){this.gl.viewport(c,k,f,l)};k.setMatrices=function(c){this.camera=c};k.rotate=function(c){mat4.copy(this.matrix,c)};k.render=function(){null!=this.shaderProgram&&(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA))};k.enableAlphaBlending=function(){this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)};k.enableAdditiveBlending=function(){this.gl.blendFunc(this.gl.ONE,this.gl.ONE)};
k.clear=function(c,k,f,l){this.gl.clearColor(c,k,f,l);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)};k.draw=function(c){function k(c,e,h){void 0==e.cacheAttribLoc&&(e.cacheAttribLoc={});void 0==e.cacheAttribLoc[h]&&(e.cacheAttribLoc[h]=c.getAttribLocation(e,h));return e.cacheAttribLoc[h]}if(this.shaderProgram){this.gl.uniformMatrix4fv(this.shaderProgram.pMatrixUniform,!1,this.camera.getMatrix());this.gl.uniformMatrix4fv(this.shaderProgram.mvMatrixUniform,!1,this.matrix);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,
c.vBufferPos);var f=k(this.gl,this.shaderProgram,"aVertexPosition");this.gl.vertexAttribPointer(f,c.vBufferPos.itemSize,this.gl.FLOAT,!1,0,0);this.gl.enableVertexAttribArray(f);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,c.vBufferUV);f=k(this.gl,this.shaderProgram,"aTextureCoord");this.gl.vertexAttribPointer(f,c.vBufferUV.itemSize,this.gl.FLOAT,!1,0,0);this.gl.enableVertexAttribArray(f);this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,c.iBuffer);for(f=0;f<c.extraAttributes.length;f++){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,
c.extraAttributes[f].buffer);var l=k(this.gl,this.shaderProgram,c.extraAttributes[f].name);this.gl.vertexAttribPointer(l,c.extraAttributes[f].itemSize,this.gl.FLOAT,!1,0,0);this.gl.enableVertexAttribArray(l)}c.drawType==this.gl.POINTS?this.gl.drawArrays(c.drawType,0,c.vertexSize):this.gl.drawElements(c.drawType,c.iBuffer.numItems,this.gl.UNSIGNED_SHORT,0)}else console.warn("Shader program not ready yet")};k.resize=function(){this.W=window.innerWidth;this.H=window.innerHeight;this.canvas.width=this.W;
this.canvas.height=this.H;this.gl.viewportWidth=this.W;this.gl.viewportHeight=this.H;this.gl.viewport(0,0,this.W,this.H);this.aspectRatio=window.innerWidth/window.innerHeight;this.render()};f.getInstance=function(){null==c&&(c=new f);return c};bongiovi.GL=f.getInstance();bongiovi.GLTool=f.getInstance()})();bongiovi=window.bongiovi||{};
(function(){var c=function(c){void 0==c&&(c=document);this._isRotateZ=this._preZ=this._mouseZ=this._z=0;this.matrix=mat4.create();this.m=mat4.create();this._vZaxis=vec3.clone([0,0,0]);this._zAxis=vec3.clone([0,0,-1]);this.preMouse={x:0,y:0};this.mouse={x:0,y:0};this._isMouseDown=!1;this._rotation=quat.clone([0,0,1,0]);this.tempRotation=quat.clone([0,0,0,0]);this._currDiffY=this._currDiffX=this.diffY=this.diffX=this._rotateZMargin=0;this._offset=0.0040;this._easing=0.1;this._slerp=-1;this._isLocked=
!1;var e=this;c.addEventListener("mousedown",function(c){e._onMouseDown(c)});c.addEventListener("touchstart",function(c){e._onMouseDown(c)});c.addEventListener("mouseup",function(c){e._onMouseUp(c)});c.addEventListener("touchend",function(c){e._onMouseUp(c)});c.addEventListener("mousemove",function(c){e._onMouseMove(c)});c.addEventListener("touchmove",function(c){e._onMouseMove(c)});c.addEventListener("mousewheel",function(c){e._onMouseWheel(c)});c.addEventListener("DOMMouseScroll",function(c){e._onMouseWheel(c)})},
f=c.prototype;f.lock=function(c){this._isLocked=c||!0};f.getMousePos=function(c){var e;void 0!=c.changedTouches?(e=c.changedTouches[0].pageX,c=c.changedTouches[0].pageY):(e=c.clientX,c=c.clientY);return{x:e,y:c}};f._onMouseDown=function(c){if(!this._isLocked&&!this._isMouseDown){c=this.getMousePos(c);var e=quat.clone(this._rotation);this._updateRotation(e);this._rotation=e;this._isMouseDown=!0;this._isRotateZ=0;this.preMouse={x:c.x,y:c.y};if(c.y<this._rotateZMargin||c.y>window.innerHeight-this._rotateZMargin)this._isRotateZ=
1;else if(c.x<this._rotateZMargin||c.x>window.innerWidth-this._rotateZMargin)this._isRotateZ=2;this._z=this._preZ;this._currDiffY=this.diffY=this._currDiffX=this.diffX=0}};f._onMouseMove=function(c){this._isLocked||(this.mouse=this.getMousePos(c))};f._onMouseUp=function(c){!this._isLocked&&this._isMouseDown&&(this._isMouseDown=!1)};f._onMouseWheel=function(c){if(!this._isLocked){c.preventDefault();var e=c.wheelDelta;c=c.detail;this._preZ-=5*(c?e?0<e/c/40*c?1:-1:-c/3:e/120)}};f.setCameraPos=function(c,
e){this._easing=e=e||this._easing;if(!(0<this._slerp)){var h=quat.clone(this._rotation);this._updateRotation(h);this._rotation=quat.clone(h);this._currDiffY=this.diffY=this._currDiffX=this.diffX=0;this._isMouseDown=!1;this._isRotateZ=0;this._targetQuat=quat.clone(c);this._slerp=1}};f.resetQuat=function(){this._rotation=quat.clone([0,0,1,0]);this.tempRotation=quat.clone([0,0,0,0]);this._targetQuat=void 0;this._slerp=-1};f.update=function(){mat4.identity(this.m);void 0==this._targetQuat?(quat.set(this.tempRotation,
this._rotation[0],this._rotation[1],this._rotation[2],this._rotation[3]),this._updateRotation(this.tempRotation)):(this._slerp+=0.1*(0-this._slerp),0.0010>this._slerp?(quat.set(this._rotation,this._targetQuat[0],this._targetQuat[1],this._targetQuat[2],this._targetQuat[3]),this._targetQuat=void 0,this._slerp=-1):(quat.set(this.tempRotation,0,0,0,0),quat.slerp(this.tempRotation,this._targetQuat,this._rotation,this._slerp)));vec3.transformQuat(this._vZaxis,this._vZaxis,this.tempRotation);mat4.fromQuat(this.matrix,
this.tempRotation)};f._updateRotation=function(c){this._isMouseDown&&!this._isLocked&&(this.diffX=-(this.mouse.x-this.preMouse.x),this.diffY=this.mouse.y-this.preMouse.y,this._isInvert&&(this.diffX=-this.diffX),this._isInvert&&(this.diffY=-this.diffY));this._currDiffX+=(this.diffX-this._currDiffX)*this._easing;this._currDiffY+=(this.diffY-this._currDiffY)*this._easing;if(0<this._isRotateZ){if(1==this._isRotateZ)var e=-this._currDiffX*this._offset,e=e*(this.preMouse.y<this._rotateZMargin?-1:1),h=quat.clone([0,
0,Math.sin(e),Math.cos(e)]);else e=-this._currDiffY*this._offset,e*=this.preMouse.x<this._rotateZMargin?1:-1,h=quat.clone([0,0,Math.sin(e),Math.cos(e)]);quat.multiply(quat,c,h)}else e=vec3.clone([this._currDiffX,this._currDiffY,0]),h=vec3.create(),vec3.cross(h,e,this._zAxis),vec3.normalize(h,h),e=vec3.length(e)*this._offset,h=quat.clone([Math.sin(e)*h[0],Math.sin(e)*h[1],Math.sin(e)*h[2],Math.cos(e)]),quat.multiply(c,h,c)};bongiovi.SceneRotation=c})();(function(){var c=function(){this.gl=bongiovi.GLTool.gl;this._children=[];this._init()},f=c.prototype;f._init=function(){this.camera=new bongiovi.CameraPerspective;this.camera.setPerspective(45*Math.PI/180,window.innerWidth/window.innerHeight,5,3E3);var c=vec3.clone([0,0,500]),e=vec3.create(),h=vec3.clone([0,-1,0]);this.camera.lookAt(c,e,h);this.sceneRotation=new bongiovi.SceneRotation;this.rotationFront=mat4.create();mat4.identity(this.rotationFront);this.cameraOtho=new bongiovi.Camera;this._initTextures();
this._initViews();window.addEventListener("resize",this._onResize.bind(this))};f._initTextures=function(){};f._initViews=function(){};f.loop=function(){this.update();this.render()};f.update=function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT);this.sceneRotation.update();bongiovi.GLTool.setMatrices(this.camera);bongiovi.GLTool.rotate(this.sceneRotation.matrix)};f.render=function(){};f._onResize=function(c){this.camera.resize&&this.camera.resize(window.innerWidth/window.innerHeight)};
bongiovi.Scene=c})();bongiovi=window.bongiovi||{};(function(){var c=function(){this.matrix=mat4.create();mat4.identity(this.matrix);this.position=vec3.create()},f=c.prototype;f.lookAt=function(c,e,h){vec3.copy(this.position,c);mat4.identity(this.matrix);mat4.lookAt(this.matrix,c,e,h)};f.getMatrix=function(){return this.matrix};bongiovi.Camera=c})();bongiovi=window.bongiovi||{};
(function(){var c=bongiovi.Camera,f=function(){c.call(this);this.projection=mat4.create();this.mtxFinal=mat4.create()},k=f.prototype=new c;k.setPerspective=function(c,h,k,f){this._fov=c;this._near=k;this._far=f;mat4.perspective(this.projection,c,h,k,f)};k.getMatrix=function(){mat4.multiply(this.mtxFinal,this.projection,this.matrix);return this.mtxFinal};k.resize=function(c){mat4.perspective(this.projection,this._fov,c,this._near,this._far)};bongiovi.CameraPerspective=f})();(function(){var c=function(c){this._listenerTarget=c||window;bongiovi.CameraPerspective.call(this);this._isLocked=!1;this._init()},f=c.prototype=new bongiovi.CameraPerspective,k=bongiovi.CameraPerspective.prototype,e=bongiovi.EaseNumber;f._init=function(){this.radius=new e(500);this.position[2]=this.radius.value;this.center=vec3.create();this.up=vec3.clone([0,-1,0]);this.lookAt(this.position,this.center,this.up);this._mouse={};this._preMouse={};this._isMouseDown=!1;this._rx=new e(0);this._rx.limit(-Math.PI/
2,Math.PI/2);this._ry=new e(0);this._preRY=this._preRX=0;this._listenerTarget.addEventListener("mousewheel",this._onWheel.bind(this));this._listenerTarget.addEventListener("DOMMouseScroll",this._onWheel.bind(this));this._listenerTarget.addEventListener("mousedown",this._onMouseDown.bind(this));this._listenerTarget.addEventListener("touchstart",this._onMouseDown.bind(this));this._listenerTarget.addEventListener("mousemove",this._onMouseMove.bind(this));this._listenerTarget.addEventListener("touchmove",
this._onMouseMove.bind(this));window.addEventListener("mouseup",this._onMouseUp.bind(this));window.addEventListener("touchend",this._onMouseUp.bind(this))};f.lock=function(c){this._isLocked=c||!0};f._onMouseDown=function(c){this._isMouseDown=!0;h(c,this._mouse);h(c,this._preMouse);this._preRX=this._rx.targetValue;this._preRY=this._ry.targetValue};f._onMouseMove=function(c){h(c,this._mouse);this._isMouseDown&&(this._ry.value=this._preRY-0.01*(this._mouse.x-this._preMouse.x),this._rx.value=this._preRX-
0.01*(this._mouse.y-this._preMouse.y),this._rx.targetValue>0.5*Math.PI&&(this._rx.targetValue=Math))};f._onMouseUp=function(c){this._isMouseDown=!1;h(c,this._mouse)};f._onWheel=function(c){if(!this._isLocked){var e=c.wheelDelta;c=c.detail;this.radius.add(5*-(c?e?0<e/c/40*c?1:-1:-c/3:e/120))}};f.getMatrix=function(){this._updateCameraPosition();this.lookAt(this.position,this.center,this.up);return k.getMatrix.call(this)};f._updateCameraPosition=function(){this.position[2]=this.radius.value;this.position[1]=
Math.sin(this._rx.value)*this.radius.value;var c=Math.cos(this._rx.value)*this.radius.value;this.position[0]=Math.cos(this._ry.value+0.5*Math.PI)*c;this.position[2]=Math.sin(this._ry.value+0.5*Math.PI)*c};var h=function(c,e){var h=e||{};c.touches?(h.x=c.touches[0].pageX,h.y=c.touches[1].pageY):(h.x=c.clientX,h.y=c.clientY);return h};bongiovi.SimpleCamera=c})();(function(){var c=function(c,e,h){this.gl=bongiovi.GLTool.gl;this.vertexSize=c;this.indexSize=e;this.drawType=h;this.extraAttributes=[];this._floatArrayVertex=this.vBufferPos=void 0;this._init()},f=c.prototype;f._init=function(){};f.bufferVertex=function(c){for(var e=[],h=0;h<c.length;h++)for(var f=0;f<c[h].length;f++)e.push(c[h][f]);void 0==this.vBufferPos&&(this.vBufferPos=this.gl.createBuffer());this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vBufferPos);if(void 0==this._floatArrayVertex)this._floatArrayVertex=
new Float32Array(e);else if(c.length!=this._floatArrayVertex.length)this._floatArrayVertex=new Float32Array(e);else for(h=0;h<c.length;h++)this._floatArrayVertex[h]=c[h];this.gl.bufferData(this.gl.ARRAY_BUFFER,this._floatArrayVertex,this.gl.STATIC_DRAW);this.vBufferPos.itemSize=3};f.bufferTexCoords=function(c){for(var e=[],h=0;h<c.length;h++)for(var f=0;f<c[h].length;f++)e.push(c[h][f]);this.vBufferUV=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vBufferUV);this.gl.bufferData(this.gl.ARRAY_BUFFER,
new Float32Array(e),this.gl.STATIC_DRAW);this.vBufferUV.itemSize=2};f.bufferData=function(c,e,h){for(var f=-1,l=0;l<this.extraAttributes.length;l++)if(this.extraAttributes[l].name==e){this.extraAttributes[l].data=c;f=l;break}for(var z=[],l=0;l<c.length;l++)for(var s=0;s<c[l].length;s++)z.push(c[l][s]);if(-1==f)l=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,l),f=new Float32Array(z),this.gl.bufferData(this.gl.ARRAY_BUFFER,f,this.gl.STATIC_DRAW),this.extraAttributes.push({name:e,data:c,
itemSize:h,buffer:l,floatArray:f});else{l=this.extraAttributes[f].buffer;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,l);f=this.extraAttributes[f].floatArray;for(l=0;l<z.length;l++)f[l]=z[l];this.gl.bufferData(this.gl.ARRAY_BUFFER,f,this.gl.STATIC_DRAW)}};f.bufferIndices=function(c){this.iBuffer=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.iBuffer);this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),this.gl.STATIC_DRAW);this.iBuffer.itemSize=1;this.iBuffer.numItems=
c.length};bongiovi.Mesh=c})();(function(){var c=function(c,e){this.gl=bongiovi.GL.gl;this.idVertex=c;this.idFragment=e;this.parameters=[];this.uniformTextures=[];this.fragmentShader=this.vertexShader=void 0;this._isReady=!1;this._loadedCount=0;void 0==c&&this.createVertexShaderProgram("precision highp float;attribute vec3 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;varying vec2 vTextureCoord;void main(void) {    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);    vTextureCoord = aTextureCoord;}");
void 0==e&&this.createFragmentShaderProgram("precision mediump float;varying vec2 vTextureCoord;uniform sampler2D uSampler0;void main(void) {    gl_FragColor = texture2D(uSampler0, vec2(vTextureCoord.s, vTextureCoord.t));}");this.init()},f=c.prototype;f.init=function(){this.idVertex&&-1<this.idVertex.indexOf("main(void)")?this.createVertexShaderProgram(this.idVertex):this.getShader(this.idVertex,!0);this.idFragment&&-1<this.idFragment.indexOf("main(void)")?this.createFragmentShaderProgram(this.idVertex):
this.getShader(this.idFragment,!0)};f.getShader=function(c,e){if(c){var h=new XMLHttpRequest;h.hasCompleted=!1;var f=this;h.onreadystatechange=function(c){4==c.target.readyState&&(e?f.createVertexShaderProgram(c.target.responseText):f.createFragmentShaderProgram(c.target.responseText))};h.open("GET",c,!0);h.send(null)}};f.createVertexShaderProgram=function(c){if(this.gl){var e=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(e,c);this.gl.compileShader(e);if(!this.gl.getShaderParameter(e,
this.gl.COMPILE_STATUS))return console.warn(this.gl.getShaderInfoLog(e)),null;this.vertexShader=e;void 0!=this.vertexShader&&void 0!=this.fragmentShader&&this.attachShaderProgram();this._loadedCount++}};f.createFragmentShaderProgram=function(c){if(this.gl){var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,c);this.gl.compileShader(e);if(!this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS))return console.warn(this.gl.getShaderInfoLog(e)),null;this.fragmentShader=e;void 0!=
this.vertexShader&&void 0!=this.fragmentShader&&this.attachShaderProgram();this._loadedCount++}};f.attachShaderProgram=function(){this._isReady=!0;this.shaderProgram=this.gl.createProgram();this.gl.attachShader(this.shaderProgram,this.vertexShader);this.gl.attachShader(this.shaderProgram,this.fragmentShader);this.gl.linkProgram(this.shaderProgram)};f.bind=function(){this._isReady&&(this.gl.useProgram(this.shaderProgram),void 0==this.shaderProgram.pMatrixUniform&&(this.shaderProgram.pMatrixUniform=
this.gl.getUniformLocation(this.shaderProgram,"uPMatrix")),void 0==this.shaderProgram.mvMatrixUniform&&(this.shaderProgram.mvMatrixUniform=this.gl.getUniformLocation(this.shaderProgram,"uMVMatrix")),bongiovi.GLTool.setShader(this),bongiovi.GLTool.setShaderProgram(this.shaderProgram),this.uniformTextures=[])};f.isReady=function(){return this._isReady};f.uniform=function(c,e,h){if(this._isReady){"texture"==e&&(e="uniform1i");for(var f=!1,l,z=0;z<this.parameters.length;z++)if(l=this.parameters[z],l.name==
c){l.value=h;f=!0;break}f?this.shaderProgram[c]=l.uniformLoc:(this.shaderProgram[c]=this.gl.getUniformLocation(this.shaderProgram,c),this.parameters.push({name:c,type:e,value:h,uniformLoc:this.shaderProgram[c]}));if(-1==e.indexOf("Matrix"))this.gl[e](this.shaderProgram[c],h);else this.gl[e](this.shaderProgram[c],!1,h);"uniform1i"==e&&(this.uniformTextures[h]=this.shaderProgram[c])}};f.unbind=function(){};bongiovi.GLShader=c})();(function(){var c,f,k=function(e,k,l){l=l||{};c=bongiovi.GL.gl;f=bongiovi.GL;if(k)this.texture=e;else{this.texture=c.createTexture();this._isVideo="VIDEO"==e.tagName;this.magFilter=l.magFilter||c.LINEAR;this.minFilter=l.minFilter||c.LINEAR_MIPMAP_NEAREST;this.wrapS=l.wrapS||c.MIRRORED_REPEAT;this.wrapT=l.wrapT||c.MIRRORED_REPEAT;k=e.width||e.videoWidth;l=e.height||e.videoHeight;if(k){if(0==k||k&k-1||0==l||l&l-1)this.wrapS=this.wrapT=c.CLAMP_TO_EDGE,this.minFilter==c.LINEAR_MIPMAP_NEAREST&&(this.minFilter=
c.LINEAR),console.log(this.minFilter,c.LINEAR_MIPMAP_NEAREST,c.LINEAR)}else this.wrapS=this.wrapT=c.CLAMP_TO_EDGE,this.minFilter==c.LINEAR_MIPMAP_NEAREST&&(this.minFilter=c.LINEAR);c.bindTexture(c.TEXTURE_2D,this.texture);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this.magFilter);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this.minFilter);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,
this.wrapS);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this.wrapT);this.minFilter==c.LINEAR_MIPMAP_NEAREST&&c.generateMipmap(c.TEXTURE_2D);c.bindTexture(c.TEXTURE_2D,null)}},e=k.prototype;e.updateTexture=function(e){c.bindTexture(c.TEXTURE_2D,this.texture);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this.magFilter);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this.minFilter);this.minFilter==
c.LINEAR_MIPMAP_NEAREST&&c.generateMipmap(c.TEXTURE_2D);c.bindTexture(c.TEXTURE_2D,null)};e.bind=function(e,k){void 0==e&&(e=0);f.shader&&(c.activeTexture(c.TEXTURE0+e),c.bindTexture(c.TEXTURE_2D,this.texture),c.uniform1i(f.shader.uniformTextures[e],e),this._bindIndex=e)};e.unbind=function(){c.bindTexture(c.TEXTURE_2D,null)};bongiovi.GLTexture=k})();(function(){var c=function(c,e){this.shader=new bongiovi.GLShader(c,e);this._init()},f=c.prototype;f._init=function(){};f.render=function(){};bongiovi.View=c})();(function(){var c=bongiovi.View,f=function(e,f){c.call(this,e,f)},k=f.prototype=new c;k._init=function(){this.mesh=bongiovi.MeshUtils.createPlane(2,2,1)};k.render=function(c){this.shader.isReady()&&(this.shader.bind(),this.shader.uniform("texture","uniform1i",0),c.bind(0),bongiovi.GLTool.draw(this.mesh))};bongiovi.ViewCopy=f})();(function(){var c,f=bongiovi.GLTexture,k=function(e,f,k){c=bongiovi.GLTool.gl;k=k||{};this.width=e;this.height=f;this.magFilter=k.magFilter||c.LINEAR;this.minFilter=k.minFilter||c.LINEAR_MIPMAP_NEAREST;this.wrapS=k.wrapS||c.MIRRORED_REPEAT;this.wrapT=k.wrapT||c.MIRRORED_REPEAT;if(0==e||e&e-1||0==f||f&f-1)this.wrapS=this.wrapT=c.CLAMP_TO_EDGE,this.minFilter==c.LINEAR_MIPMAP_NEAREST&&(this.minFilter=c.LINEAR);this._init()},e=k.prototype;e._init=function(){this.depthTextureExt=c.getExtension("WEBKIT_WEBGL_depth_texture");
this.texture=c.createTexture();this.depthTexture=c.createTexture();this.glTexture=new f(this.texture,!0);this.glDepthTexture=new f(this.depthTexture,!0);this.frameBuffer=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,this.frameBuffer);this.frameBuffer.width=this.width;this.frameBuffer.height=this.height;c.bindTexture(c.TEXTURE_2D,this.texture);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this.magFilter);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this.minFilter);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);this.magFilter==c.NEAREST&&this.minFilter==c.NEAREST?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,this.frameBuffer.width,this.frameBuffer.height,0,c.RGBA,c.FLOAT,null):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,this.frameBuffer.width,this.frameBuffer.height,0,c.RGBA,c.UNSIGNED_BYTE,null);this.minFilter==c.LINEAR_MIPMAP_NEAREST&&c.generateMipmap(c.TEXTURE_2D);c.bindTexture(c.TEXTURE_2D,this.depthTexture);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);null!=this.depthTextureExt&&c.texImage2D(c.TEXTURE_2D,0,c.DEPTH_COMPONENT,this.width,this.height,0,c.DEPTH_COMPONENT,c.UNSIGNED_SHORT,null);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this.texture,0);if(null==this.depthTextureExt){var e=c.createRenderbuffer();
c.bindRenderbuffer(c.RENDERBUFFER,e);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,this.frameBuffer.width,this.frameBuffer.height);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,e)}else c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.TEXTURE_2D,this.depthTexture,0);c.bindTexture(c.TEXTURE_2D,null);c.bindRenderbuffer(c.RENDERBUFFER,null);c.bindFramebuffer(c.FRAMEBUFFER,null)};e.bind=function(){c.bindFramebuffer(c.FRAMEBUFFER,this.frameBuffer)};e.unbind=
function(){c.bindFramebuffer(c.FRAMEBUFFER,null)};e.getTexture=function(){return this.glTexture};e.getDepthTexture=function(){return this.glDepthTexture};bongiovi.FrameBuffer=k})();(function(){var c,f=function(e,f,k){c=bongiovi.GL;void 0!=e&&(this.view="string"==typeof e?new bongiovi.ViewCopy("assets/shaders/copy.vert",e):e,this.width=void 0==f?512:f,this.height=void 0==k?512:k,this._init())},k=f.prototype;k._init=function(){this.fbo=new bongiovi.FrameBuffer(this.width,this.height);this.fbo.bind();c.setViewport(0,0,this.fbo.width,this.fbo.height);c.clear(0,0,0,0);this.fbo.unbind()};k.render=function(e){c.setViewport(0,0,this.fbo.width,this.fbo.height);this.fbo.bind();c.clear(0,
0,0,0);this.view.render(e);this.fbo.unbind();return this.fbo.getTexture()};k.getTexture=function(){return this.fbo.getTexture()};bongiovi.Pass=f})();(function(c){c=function(){this._passes=[]};var f=c.prototype=new bongiovi.Pass;f.addPass=function(c){this._passes.push(c)};f.render=function(c){this.texture=c;for(c=0;c<this._passes.length;c++)this.texture=this._passes[c].render(this.texture);return this.texture};f.getTexture=function(){return this.texture};bongiovi.EffectComposer=c})();(function(){bongiovi.MeshUtils={};bongiovi.MeshUtils.createPlane=function(c,f,k){var e=[],h=[],m=[],l=c/k,z=f/k,s=1/k,n=0;c=0.5*-c;f=0.5*-f;for(var p=0;p<k;p++)for(var w=0;w<k;w++){var u=l*p+c,q=z*w+f;e.push([u,q,0]);e.push([u+l,q,0]);e.push([u+l,q+z,0]);e.push([u,q+z,0]);u=p/k;q=w/k;h.push([u,q]);h.push([u+s,q]);h.push([u+s,q+s]);h.push([u,q+s]);m.push(4*n+0);m.push(4*n+1);m.push(4*n+2);m.push(4*n+0);m.push(4*n+2);m.push(4*n+3);n++}k=new bongiovi.Mesh(e.length,m.length,bongiovi.GLTool.gl.TRIANGLES);
k.bufferVertex(e);k.bufferTexCoords(h);k.bufferIndices(m);return k};bongiovi.MeshUtils.createSphere=function(c,f){};bongiovi.MeshUtils.createCube=function(c,f){}})();
